(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10d60e77"],{"10ce":function(e,t,a){},"3d32":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},i=[],n=a("cadd"),s=a("892e"),r=a("5aaa"),c=a("2efa"),l=n["a"].Locale,d={methods:{toggleLang:function(e){switch(localStorage.setItem("lang",e),e){case"en-US":l.use("en-US",s["a"]);break;case"zh-TW":l.use("zh-TW",c["a"]);break;default:l.use("zh-CN",r["a"])}this.$i18n.locale=e}}},m=d,u=(a("7a68"),a("2877")),p=Object(u["a"])(m,o,i,!1,null,"6efd8910",null);p.options.__file="LangTool.vue";t["a"]=p.exports},"73cf":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("NavBar",{attrs:{title:e.$t("common.register"),leftArrow:!0},on:{"click-left":e.goBackHandler}}),a("div",{staticClass:"form-wrap register-form"},[a("div",{staticClass:"login-form-item",on:{click:e.showPicker}},[a("cube-input",{attrs:{placeholder:e.$t("common.organizationPlaceholder"),readonly:""},model:{value:e.model.orgOrDep,callback:function(t){e.$set(e.model,"orgOrDep",t)},expression:"model.orgOrDep"}},[a("span",{class:e.isEn?"en-label":"label",attrs:{slot:"prepend"},slot:"prepend"},[a("i",{staticClass:"required"},[e._v("*")]),e._v(e._s(e.$t("common.organization")))])])],1),a("div",{staticClass:"login-form-item"},[a("cube-input",{attrs:{placeholder:e.$t("common.userNamePlaceholder"),maxlength:30},model:{value:e.model.userName,callback:function(t){e.$set(e.model,"userName",t)},expression:"model.userName"}},[a("span",{class:e.isEn?"en-label":"label",attrs:{slot:"prepend"},slot:"prepend"},[a("i",{staticClass:"required"},[e._v("*")]),e._v(e._s(e.$t("common.userName")))])])],1),a("div",{staticClass:"custom-form-item"},[a("span",{class:e.isEn?"en-label":"label"},[a("i",{staticClass:"required"},[e._v("*")]),e._v(e._s(e.$t("common.photo")))]),a("u-upload",{on:{fileSubmitted:e.fileSubmitted,filesAdded:e.filesAdded},model:{value:e.model.images,callback:function(t){e.$set(e.model,"images",t)},expression:"model.images"}})],1),a("div",{staticClass:"submit-wrap"},[a("UButton",{attrs:{buttonType:"submit",size:"large",disabled:e.uploading},on:{click:e.submitHandler}},[e._v(e._s(e.$t("common.submit")))])],1)]),a("LangTool")],1)},i=[],n=a("cebc"),s=a("d000"),r=a("4da9"),c=a("7cfa"),l=a("3d32"),d=a("fa7d"),m={register:"/h5/register",department:"/h5/departments"},u={data:function(){return{validity:{},valid:void 0,model:{userName:"",department:"",organization:"",orgOrDep:"",images:[],telephone:"",idCard:"",mark:""},departments:[],uploading:!1}},mounted:function(){this.getOrg()},methods:{getOrg:function(){var e=this,t=this.$route.params.id;this.http.get("".concat(m.department,"?organization_id=").concat(t)).then(function(t){if(1e3===t.code){e.departments=t.data.department;var a=t.data.organization;e.departments.unshift({department:a.organization_name})}})},submitHandler:function(){var e=Object(d["d"])(this.model),t=e.department,a=void 0===t?"":t,o=e.organization,i=void 0===o?"":o,n=e.userName,s=void 0===n?"":n,r=e.images,c=void 0===r?[]:r,l=e.telephone,m=void 0===l?"":l,u=e.mark,p=void 0===u?"":u,h=e.idCard,g=void 0===h?"":h,f={department:a,organization:i,userName:s,telephone:m,image:c[0]&&c[0].base64,mark:p,idCard:g};this.checkData(f)&&(console.log("valid"),this.doSubmit({department:a,organization:i,people_name:s,image:f.image,telephone:m,mark:p,id_card:g}))},doSubmit:function(e){var t=this;this.http.post(m.register,e).then(function(a){1e3===a.code?t.showRegisterSuccess(Object(n["a"])({},a.data,{department:e.department||e.organization})):t.showToastType(a.msg?"".concat(a.msg).concat(a.reason?":".concat(a.reason):""):t.$t("common.registerFailed"))}).catch(function(e){console.log(e),t.showToastType(t.$t("common.registerFailed"))})},showRegisterSuccess:function(e){var t=e.people_id,a=e.people_name,o=e.department,i=this.$t("common.registerSuccessDialog1"),n=this.$t("common.registerSuccessDialog2"),s=this.$t("common.registerSuccessDialog3");this.$createDialog({type:"alert",title:a,content:"".concat(i).concat(o).concat(n).concat(t).concat(s),icon:"cubeic-alert"}).show()},goBackHandler:function(){this.$router.go(-1)},checkData:function(e){var t=this,a=e.department,o=e.organization,i=e.userName,n=e.telephone,s=e.image,r=[[!(a||o),this.$t("common.organizationRequired")],[!i,this.$t("common.userNameRequired")],[!s,this.$t("common.photoRequired")],[n&&!/^([()+-\s0-9]){6,20}$/.test(n),this.$t("common.telephoneError")]];return r.every(function(e){return!e[0]||(t.showToastType(e[1]),!1)})},filesAdded:function(){this.uploading=!0},fileSubmitted:function(){this.uploading=!1},showToastType:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",a=this.$createToast({txt:e,type:t});a.show()},showPicker:function(){this.picker||(this.picker=this.$createPicker({title:this.$t("common.organization"),data:[this.departments],alias:{value:"department",text:"department"},onSelect:this.selectHandle})),this.picker.show()},selectHandle:function(e,t){var a=e[0],o=t[0];0===o?(this.model.department="",this.model.organization=a,this.model.orgOrDep=a):(this.model.department=a,this.model.organization="",this.model.orgOrDep=a)}},components:{NavBar:s["a"],UButton:r["a"],UUpload:c["a"],LangTool:l["a"]},computed:{locale:function(){return this.$i18n.locale},isEn:function(){return"en-US"===this.locale}}},p=u,h=(a("a304"),a("2877")),g=Object(h["a"])(p,o,i,!1,null,"346acc57",null);g.options.__file="Register.vue";t["default"]=g.exports},"76c0":function(e,t,a){},"7a68":function(e,t,a){"use strict";var o=a("76c0"),i=a.n(o);i.a},a304:function(e,t,a){"use strict";var o=a("10ce"),i=a.n(o);i.a}}]);
//# sourceMappingURL=chunk-10d60e77.8600ebae.js.map