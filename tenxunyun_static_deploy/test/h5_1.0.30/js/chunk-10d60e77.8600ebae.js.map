{"version":3,"sources":["webpack:///./src/components/LangTool.vue?0ac7","webpack:///src/components/LangTool.vue","webpack:///./src/components/LangTool.vue?56b4","webpack:///./src/components/LangTool.vue","webpack:///./src/views/Register.vue?4a16","webpack:///src/views/Register.vue","webpack:///./src/views/Register.vue?fc04","webpack:///./src/views/Register.vue","webpack:///./src/components/LangTool.vue?2fa8","webpack:///./src/views/Register.vue?e694"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticRenderFns","Locale","src","LangToolvue_type_script_lang_js_","methods","toggleLang","lang","localStorage","setItem","use","en_US","zh_TW","zh_CN","$i18n","locale","components_LangToolvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__","attrs","title","$t","leftArrow","on","click-left","goBackHandler","staticClass","click","showPicker","placeholder","readonly","model","value","callback","$$v","$set","expression","class","isEn","slot","_v","_s","maxlength","fileSubmitted","filesAdded","buttonType","size","disabled","uploading","submitHandler","apis","register","department","Registervue_type_script_lang_js_","data","validity","valid","undefined","userName","organization","orgOrDep","images","telephone","idCard","mark","departments","mounted","getOrg","_this","orgId","$route","params","id","http","get","concat","then","res","code","unshift","organization_name","_trimData","utils","_trimData$department","_trimData$organizatio","_trimData$userName","_trimData$images","_trimData$telephone","_trimData$mark","_trimData$idCard","image","base64","checkData","console","log","doSubmit","people_name","id_card","_this2","post","showRegisterSuccess","objectSpread","showToastType","msg","reason","catch","e","peopleId","people_id","peopleName","registerSuccessDialog1","registerSuccessDialog2","registerSuccessDialog3","$createDialog","type","content","icon","show","$router","go","_this3","rules","test","every","r","txt","arguments","length","toast","$createToast","picker","$createPicker","alias","text","onSelect","selectHandle","selectedVal","selectedIndex","index","components","NavBar","UButton","U_Button","UUpload","U_Upload","LangTool","computed","views_Registervue_type_script_lang_js_","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_LangTool_vue_vue_type_style_index_0_id_6efd8910_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_LangTool_vue_vue_type_style_index_0_id_6efd8910_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Register_vue_vue_type_style_index_0_id_346acc57_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Register_vue_vue_type_style_index_0_id_346acc57_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-10d60e77.8600ebae.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div')}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <!-- <div class=\"fixed-bottom\">\n      <a href=\"javascript:;\" @click=\"toggleLang('zh-CN')\" class=\"link\">{{$t('common.zhCN')}}</a> <span class=\"split\">|</span>\n      <a href=\"javascript:;\" @click=\"toggleLang('zh-TW')\" class=\"link\">{{$t('common.zhTW')}}</a> <span class=\"split\">|</span>\n      <a href=\"javascript:;\" @click=\"toggleLang('en-US')\" class=\"link\">{{$t('common.en')}}</a>\n    </div> -->\n    <div></div>\n</template>\n\n<script>\nimport CubeUI from 'cube-ui';\nimport enUSMessages from 'cube-ui/src/locale/lang/en-US';\nimport zhCNMessages from 'cube-ui/src/locale/lang/zh-CN';\n// 自己引入繁体中文语言包\nimport zhTWMessages from '../locales/cube-ui/zh_TW';\n\nconst Locale = CubeUI.Locale;\n\nexport default {\n  methods: {\n    toggleLang(lang) {\n      localStorage.setItem('lang', lang);\n      switch (lang) {\n        case 'en-US':\n          Locale.use('en-US', enUSMessages);\n          break;\n        case 'zh-TW':\n          Locale.use('zh-TW', zhTWMessages);\n          break;\n        default:\n          Locale.use('zh-CN', zhCNMessages);\n      }\n      this.$i18n.locale = lang;\n    },\n  },\n};\n</script>\n\n<style lang=\"stylus\" scoped>\n  @import \"../assets/styles/common.styl\";\n\n  .fixed-bottom {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 40px;\n    line-height: 40px;\n    text-align: center;\n    font-size: $size-small;\n    .link {\n      font-size: $size-small;\n    }\n  }\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--16-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LangTool.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--16-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LangTool.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LangTool.vue?vue&type=template&id=6efd8910&scoped=true&\"\nimport script from \"./LangTool.vue?vue&type=script&lang=js&\"\nexport * from \"./LangTool.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LangTool.vue?vue&type=style&index=0&id=6efd8910&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6efd8910\",\n  null\n  \n)\n\ncomponent.options.__file = \"LangTool.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('NavBar',{attrs:{\"title\":_vm.$t(\"common.register\"),\"leftArrow\":true},on:{\"click-left\":_vm.goBackHandler}}),_c('div',{staticClass:\"form-wrap register-form\"},[_c('div',{staticClass:\"login-form-item\",on:{\"click\":_vm.showPicker}},[_c('cube-input',{attrs:{\"placeholder\":_vm.$t(\"common.organizationPlaceholder\"),\"readonly\":\"\"},model:{value:(_vm.model.orgOrDep),callback:function ($$v) {_vm.$set(_vm.model, \"orgOrDep\", $$v)},expression:\"model.orgOrDep\"}},[_c('span',{class:_vm.isEn? 'en-label' : 'label',attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_c('i',{staticClass:\"required\"},[_vm._v(\"*\")]),_vm._v(_vm._s(_vm.$t(\"common.organization\")))])])],1),_c('div',{staticClass:\"login-form-item\"},[_c('cube-input',{attrs:{\"placeholder\":_vm.$t(\"common.userNamePlaceholder\"),\"maxlength\":30},model:{value:(_vm.model.userName),callback:function ($$v) {_vm.$set(_vm.model, \"userName\", $$v)},expression:\"model.userName\"}},[_c('span',{class:_vm.isEn? 'en-label' : 'label',attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_c('i',{staticClass:\"required\"},[_vm._v(\"*\")]),_vm._v(_vm._s(_vm.$t(\"common.userName\")))])])],1),_c('div',{staticClass:\"custom-form-item\"},[_c('span',{class:_vm.isEn? 'en-label' : 'label'},[_c('i',{staticClass:\"required\"},[_vm._v(\"*\")]),_vm._v(_vm._s(_vm.$t(\"common.photo\")))]),_c('u-upload',{on:{\"fileSubmitted\":_vm.fileSubmitted,\"filesAdded\":_vm.filesAdded},model:{value:(_vm.model.images),callback:function ($$v) {_vm.$set(_vm.model, \"images\", $$v)},expression:\"model.images\"}})],1),_c('div',{staticClass:\"submit-wrap\"},[_c('UButton',{attrs:{\"buttonType\":\"submit\",\"size\":\"large\",\"disabled\":_vm.uploading},on:{\"click\":_vm.submitHandler}},[_vm._v(_vm._s(_vm.$t(\"common.submit\")))])],1)]),_c('LangTool')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <NavBar :title='$t(\"common.register\")' @click-left=\"goBackHandler\" :leftArrow=\"true\"></NavBar>\r\n    <div class=\"form-wrap register-form\">\r\n        <div class=\"login-form-item\" @click=\"showPicker\">\r\n          <cube-input :placeholder='$t(\"common.organizationPlaceholder\")' readonly v-model=\"model.orgOrDep\">\r\n            <span slot=\"prepend\" :class=\"isEn? 'en-label' : 'label'\"><i class=\"required\">*</i>{{$t(\"common.organization\")}}</span>\r\n          </cube-input>\r\n        </div>\r\n\r\n        <div class=\"login-form-item\">\r\n            <cube-input v-model=\"model.userName\" :placeholder='$t(\"common.userNamePlaceholder\")' :maxlength=\"30\">\r\n              <span slot=\"prepend\" :class=\"isEn? 'en-label' : 'label'\"><i class=\"required\">*</i>{{$t(\"common.userName\")}}</span>\r\n            </cube-input>\r\n          </div>\r\n\r\n        <div class=\"custom-form-item\">\r\n          <span :class=\"isEn? 'en-label' : 'label'\"><i class=\"required\">*</i>{{$t(\"common.photo\")}}</span>\r\n          <u-upload\r\n            v-model=\"model.images\"\r\n            @fileSubmitted=\"fileSubmitted\"\r\n            @filesAdded=\"filesAdded\" />\r\n        </div>\r\n\r\n        <!-- <div class=\"login-form-item\">\r\n          <cube-input v-model=\"model.telephone\" :placeholder='$t(\"common.telephoneNumberPlaceholder\")' :maxlength=\"20\">\r\n            <span slot=\"prepend\" class=\"label\">{{$t('common.telephone')}}</span>\r\n          </cube-input>\r\n        </div>\r\n\r\n        <div class=\"login-form-item\">\r\n          <cube-input v-model=\"model.idCard\" :maxlength=\"30\">\r\n            <span slot=\"prepend\" :class=\"isEn? 'en-label' : 'label'\">{{$t(\"common.idCardNumber\")}}</span>\r\n          </cube-input>\r\n        </div>\r\n        <div class=\"login-form-item\">\r\n          <cube-input v-model=\"model.mark\" :maxlength=\"200\">\r\n            <span slot=\"prepend\" :class=\"isEn? 'en-label' : 'label'\">{{$t(\"common.mark\")}}</span>\r\n          </cube-input>\r\n        </div> -->\r\n        <div class=\"submit-wrap\">\r\n          <UButton\r\n            buttonType=\"submit\"\r\n            size=\"large\"\r\n            @click=\"submitHandler\"\r\n            :disabled=\"uploading\">{{$t(\"common.submit\")}}</UButton>\r\n        </div>\r\n    </div>\r\n\r\n    <LangTool />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NavBar from '@/components/NavBar.vue';\r\nimport UButton from '@/components/U-Button.vue';\r\nimport UUpload from '@/components/U-Upload.vue';\r\nimport LangTool from '@/components/LangTool.vue';\r\nimport { trimData } from '../utils/utils';\r\n\r\nconst apis = {\r\n  register: '/h5/register',\r\n  department: '/h5/departments',\r\n};\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      validity: {},\r\n      valid: undefined,\r\n      model: {\r\n        userName: '',\r\n        department: '',\r\n        organization: '',\r\n        orgOrDep: '',\r\n        images: [],\r\n        telephone: '',\r\n        idCard: '',\r\n        mark: '',\r\n      },\r\n      departments: [],\r\n      uploading: false,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getOrg();\r\n  },\r\n  methods: {\r\n    getOrg() {\r\n      const orgId = this.$route.params.id;\r\n      this.http.get(`${apis.department}?organization_id=${orgId}`).then((res) => {\r\n        if (res.code === 1000) {\r\n          this.departments = res.data.department;\r\n          const organization = res.data.organization;\r\n          this.departments.unshift({\r\n            department: organization.organization_name,\r\n          });\r\n        }\r\n      });\r\n    },\r\n    submitHandler() {\r\n      const {\r\n        department = '', organization = '', userName = '', images = [], telephone = '', mark = '', idCard = '',\r\n      } = trimData(this.model);\r\n      // iphone5微信浏览器不能用formdata\r\n      const data = {\r\n        department,\r\n        organization,\r\n        userName,\r\n        telephone,\r\n        image: images[0] && images[0].base64,\r\n        mark,\r\n        idCard,\r\n      };\r\n      if (this.checkData(data)) {\r\n        console.log('valid');\r\n        this.doSubmit({\r\n          department,\r\n          organization,\r\n          people_name: userName,\r\n          image: data.image,\r\n          telephone,\r\n          mark,\r\n          id_card: idCard,\r\n        });\r\n      }\r\n    },\r\n    doSubmit(data) {\r\n      this.http.post(apis.register, data).then((res) => {\r\n        if (res.code === 1000) {\r\n          this.showRegisterSuccess({ ...res.data, department: data.department || data.organization });\r\n        } else {\r\n          this.showToastType(res.msg ? `${res.msg}${res.reason ? `:${res.reason}` : ''}` : this.$t('common.registerFailed'));\r\n        }\r\n      }).catch((e) => {\r\n        console.log(e);\r\n        this.showToastType(this.$t('common.registerFailed'));\r\n      });\r\n    },\r\n    showRegisterSuccess(data) {\r\n      const { people_id: peopleId, people_name: peopleName, department } = data;\r\n      const registerSuccessDialog1 = this.$t('common.registerSuccessDialog1');\r\n      const registerSuccessDialog2 = this.$t('common.registerSuccessDialog2');\r\n      const registerSuccessDialog3 = this.$t('common.registerSuccessDialog3');\r\n      this.$createDialog({\r\n        type: 'alert',\r\n        title: peopleName,\r\n        content: `${registerSuccessDialog1}${department}${registerSuccessDialog2}${peopleId}${registerSuccessDialog3}`,\r\n        icon: 'cubeic-alert',\r\n      }).show();\r\n    },\r\n    goBackHandler() {\r\n      this.$router.go(-1);\r\n    },\r\n    checkData(data) {\r\n      const {\r\n        department, organization, userName, telephone, image,\r\n      } = data;\r\n      const rules = [\r\n        [!(department || organization), this.$t('common.organizationRequired')],\r\n        [!userName, this.$t('common.userNameRequired')],\r\n        [!image, this.$t('common.photoRequired')],\r\n        [telephone && (!(/^([()+-\\s0-9]){6,20}$/.test(telephone))), this.$t('common.telephoneError')],\r\n      ];\r\n      return rules.every((r) => {\r\n        if (r[0]) {\r\n          this.showToastType(r[1]);\r\n          return false;\r\n        }\r\n        return true;\r\n      });\r\n    },\r\n    filesAdded() {\r\n      this.uploading = true;\r\n    },\r\n    fileSubmitted() {\r\n      this.uploading = false;\r\n    },\r\n    showToastType(txt, type = 'error') {\r\n      const toast = this.$createToast({\r\n        txt,\r\n        type,\r\n      });\r\n      toast.show();\r\n    },\r\n    showPicker() {\r\n      if (!this.picker) {\r\n        this.picker = this.$createPicker({\r\n          title: this.$t('common.organization'),\r\n          data: [this.departments],\r\n          alias: {\r\n            value: 'department',\r\n            text: 'department',\r\n          },\r\n          onSelect: this.selectHandle,\r\n        });\r\n      }\r\n      this.picker.show();\r\n    },\r\n    selectHandle(selectedVal, selectedIndex) {\r\n      const value = selectedVal[0];\r\n      const index = selectedIndex[0];\r\n      if (index === 0) {\r\n        this.model.department = '';\r\n        this.model.organization = value;\r\n        this.model.orgOrDep = value;\r\n      } else {\r\n        this.model.department = value;\r\n        this.model.organization = '';\r\n        this.model.orgOrDep = value;\r\n      }\r\n    },\r\n  },\r\n  components: {\r\n    NavBar,\r\n    UButton,\r\n    UUpload,\r\n    LangTool,\r\n  },\r\n  computed: {\r\n    locale() {\r\n      return this.$i18n.locale;\r\n    },\r\n    isEn() {\r\n      return this.locale === 'en-US';\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n  @import \"../assets/styles/common.styl\";\r\n  @import \"../assets/styles/login-form.styl\";\r\n  .form-wrap {\r\n    margin: 0 auto;\r\n    padding-top: 19px;\r\n    width: 300px;\r\n    .submit-wrap {\r\n      margin-top: 120px;\r\n      padding-bottom: 60px;\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--16-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--16-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Register.vue?vue&type=template&id=346acc57&scoped=true&\"\nimport script from \"./Register.vue?vue&type=script&lang=js&\"\nexport * from \"./Register.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Register.vue?vue&type=style&index=0&id=346acc57&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"346acc57\",\n  null\n  \n)\n\ncomponent.options.__file = \"Register.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LangTool.vue?vue&type=style&index=0&id=6efd8910&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LangTool.vue?vue&type=style&index=0&id=6efd8910&lang=stylus&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=style&index=0&id=346acc57&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=style&index=0&id=346acc57&lang=stylus&scoped=true&\""],"sourceRoot":""}