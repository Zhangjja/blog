(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{720:function(e,t,a){"use strict";a.d(t,"j",function(){return i}),a.d(t,"h",function(){return s}),a.d(t,"f",function(){return l}),a.d(t,"d",function(){return c}),a.d(t,"e",function(){return d}),a.d(t,"g",function(){return u}),a.d(t,"b",function(){return m}),a.d(t,"c",function(){return p}),a.d(t,"i",function(){return f}),a.d(t,"a",function(){return g});var n=a(84),r=a.n(n),o=(a(733),a(237)),i=function(e){return e?r()(e).format("YYYY-MM-DD HH:mm:ss"):null},s=function(e){return e?r()(e).format("YYYY-MM-DD"):null};function l(e){if(e){return Object(o.c)()+"/"+(e instanceof Array?e[0]||{}:e||{}).photo_url}return""}function c(e){return Object.keys(e).reduce(function(t,a){return"undefined"!==typeof e[a]&&(t[a]=e[a]),t},{})}function d(){return r()(Date.now())}function u(){return Date.now()+Math.random()}function m(e){return 1===e.split(",").length&&(e="data:image/jpg;base64,".concat(e)),e}var p=30,f={showSizeChanger:!0,showQuickJumper:!0,defaultPageSize:p},g=/(?=(\b|\D))(((\d{1,2})|(1\d{1,2})|(2[0-4]\d)|(25[0-5]))\.){3}((\d{1,2})|(1\d{1,2})|(2[0-4]\d)|(25[0-5]))(?=(\b|\D))/},721:function(e,t,a){"use strict";t.a={userName:30,deviceName:50,deviceToken:50,IP:15,port:5,devicePosition:100,accountName:30,organization:50,mark:50,versionNumber:20,description:50,versionName:20,idcardNumber:30}},722:function(e,t,a){"use strict";var n=a(137),r=a(0),o=a.n(r),i=a(43),s=a(714),l=a(727),c=a.n(l);t.a=function(e){var t=e.title,a=e.Title,r=e.buttonText,l=e.doAction,d=e.buttonDisabled,u=e.buttonHide,m=e.hasDivider,p=e.customButton,f=e.buttonType,g=Object(n.a)(e,["title","Title","buttonText","doAction","buttonDisabled","buttonHide","hasDivider","customButton","buttonType"]),h=f||"primary",b=p&&o.a.createElement("div",null,p)||o.a.createElement(i.a,{type:h,onClick:l,disabled:d},r);return o.a.createElement("div",Object.assign({style:{marginBottom:5}},g),o.a.createElement("header",{className:c.a.total_header},o.a.createElement("div",null,a?o.a.createElement(a,null):t),!u&&b),m&&o.a.createElement(s.a,{className:c.a.mbt10_5}))}},723:function(e,t,a){"use strict";var n=a(137),r=a(0),o=a.n(r),i=a(731),s=a.n(i);t.a=function(e){var t=e.clsName,a=void 0===t?"":t,r=e.photo,i=e.width,l=void 0===i?60:i,c=e.height,d=void 0===c?80:c,u=e.objectFit,m=void 0===u?"cover":u,p=Object(n.a)(e,["clsName","photo","width","height","objectFit"]);return o.a.createElement("div",Object.assign({className:"".concat(a," ").concat(s.a.container),style:{width:l,height:d}},p),o.a.createElement("img",{src:r,alt:"",className:s.a.img,onLoad:function(e){return function(e,t,a,n){var r=e.target,o=a/n;r.naturalWidth/r.naturalHeight>o?"cover"===t?(r.style.height="100%",r.style.width="auto"):(r.style.width="100%",r.style.height="auto"):"cover"===t?(r.style.width="100%",r.style.height="auto"):(r.style.height="100%",r.style.width="auto")}(e,m,l,d)}}))}},724:function(e,t,a){"use strict";var n=a(121),r=a(30),o=a(31),i=a(34),s=a(32),l=a(33),c=a(0),d=a.n(c),u=a(765),m=a(718),p=a(868),f=a(9),g=a(19),h=a(105),b=(u.a.Option,Object(f.d)({all:{id:"common.all",defaultMessage:"\u5168\u90e8"},failedToGetData:{id:"common.error.failedToGetData",defaultMessage:"\u83b7\u53d6\u6570\u636e\u5931\u8d25!"},select:{id:"common.select",defaultMessage:"\u8bf7\u9009\u62e9"}})),v=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).loadSubAccounts=function(e){var t=e[e.length-1],r=t.account_id;t.loading=!0,a.getAccountList(r).then(function(e){t.loading=!1;var r=e.accounts;r=r.map(function(e){return e}),t.children=r,a.setState({acountOptions:Object(n.a)(a.state.acountOptions)})})},a.triggerChange=function(e,t){var n=a.props.onChange;n&&n(e,t)},a.initCascaderOptions=function(e){var t=Object(g.a)("userInfo",!0)||{},n={account_name:t.account_name,account_id:t.account_id,isLeaf:3===t.role.role_id,children:[]};a.getAccountList().then(function(e){var t=e.accounts||[];t=t.map(function(e){return e.isLeaf=3===e.role.role_id,3===a.props.value.length&&e.account_id===a.props.value[1]&&a.getAccountList(e.account_id).then(function(t){e.children=t.accounts.map(function(e){return e.isLeaf=!0,e}),a.setState({acountOptions:[n]})}),e}),n.children=t,a.setState({acountOptions:[n]})}).catch(function(e){m.a.error(e)})},a.state={acountOptions:[]},a}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=(Object(g.a)("userInfo",!0)||{}).account_id;this.initCascaderOptions(e)}},{key:"getAccountList",value:function(e){var t=this,a={account_id:e,page_size:99999};return new Promise(function(e,n){Object(h.f)(a).then(function(a){1e3===a.code?e(a.data):n(a.msg||t.props.intl.formatMessage(b.failedToGetData))})})}},{key:"render",value:function(){return d.a.createElement(p.a,{value:this.props.value||[],options:this.state.acountOptions,style:this.props.style,onChange:this.triggerChange,loadData:this.loadSubAccounts,changeOnSelect:!0,placeholder:this.props.intl.formatMessage(b.select),fieldNames:{label:"account_name",value:"account_id",children:"children"}})}}]),t}(d.a.Component);t.a=Object(f.e)(v)},725:function(e,t,a){"use strict";var n=a(30),r=a(31),o=a(34),i=a(32),s=a(33),l=a(37),c=a(0),d=a.n(c),u=a(749),m=a(858),p=a(9),f=a(728),g=a.n(f);function h(e){var t=[];return e.forEach(function(e){e.needTotal&&t.push(Object(l.a)({},e,{total:0}))}),t}var b=Object(p.d)({total:{id:"common.total",defaultMessage:"\u603b\u8ba1"},clear:{id:"common.clear",defaultMessage:"\u6e05\u7a7a"},selected:{id:"common.selected",defaultMessage:"\u8bf7\u9009\u62e9"},items:{id:"common.items",defaultMessage:"\u9879"}}),v=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).handleRowSelectChange=function(e,t){var n=a.state.needTotalList;n=n.map(function(e){return Object(l.a)({},e,{total:t.reduce(function(t,a){return t+parseFloat(a[e.dataIndex],10)},0)})});var r=a.props.onSelectRow;r&&r(t),a.setState({selectedRowKeys:e,needTotalList:n})},a.handleTableChange=function(e,t,n){var r=a.props.onChange;r&&r(e,t,n)},a.cleanSelectedKeys=function(){a.handleRowSelectChange([],[])};var r=h(e.columns);return a.state={selectedRowKeys:[],needTotalList:r},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.selectedRowKeys,n=t.needTotalList,r=this.props,o=r.dataList,i=r.pagination,s=r.loading,f=r.columns,h=r.rowKey,v=r.selectable,E=r.showAlert,w=Object(l.a)({showSizeChanger:!0,showQuickJumper:!0,showTotal:function(t){return"".concat(e.props.intl.formatMessage(b.total)," ").concat(t," ").concat(e.props.intl.formatMessage(b.items))}},i),S={selectedRowKeys:a,onChange:this.handleRowSelectChange,getCheckboxProps:function(e){return{disabled:e.disabled}}};return d.a.createElement("div",{className:g.a.standardTable},v&&E&&d.a.createElement("div",{className:g.a.tableAlert},d.a.createElement(u.a,{message:d.a.createElement(c.Fragment,null,d.a.createElement(p.a,b.selected)," ",d.a.createElement("a",{style:{fontWeight:600}},a.length)," ",d.a.createElement(p.a,b.items),"\xa0\xa0",n.map(function(e){return d.a.createElement("span",{style:{marginLeft:8},key:e.dataIndex},e.title,d.a.createElement(p.a,b.total),"\xa0",d.a.createElement("span",{style:{fontWeight:600}},e.render?e.render(e.total):e.total))}),d.a.createElement("a",{onClick:this.cleanSelectedKeys,style:{marginLeft:24}},d.a.createElement(p.a,b.clear))),type:"info",showIcon:!0})),d.a.createElement(m.a,{loading:s,rowKey:h||"key",rowSelection:v?S:null,dataSource:o,columns:f,pagination:w,onChange:this.handleTableChange}))}}],[{key:"getDerivedStateFromProps",value:function(e){return 0===(e.selectedRows||[]).length?{selectedRowKeys:[],needTotalList:h(e.columns)}:null}}]),t}(c.PureComponent);v.defaultProps={selectable:!0,showAlert:!0},t.a=Object(p.e)(v)},726:function(e,t,a){"use strict";var n=a(30),r=a(31),o=a(34),i=a(32),s=a(33),l=a(0),c=a.n(l),d=a(9),u=a(711),m=a(734),p=(a(735),a(729)),f=a.n(p),g=Object(d.d)({loadFail:{id:"component.ImageViewer.loadFail",defaultMessage:"\u56fe\u7247\u52a0\u8f7d\u5931\u8d25!"}}),h={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},b=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={photoIndex:0},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isOpen,a=e.imageUrl,n=e.onClose,r=e.isLoading,o=e.imagePadding;return c.a.createElement("div",null,t&&c.a.createElement("div",null,a&&!r&&c.a.createElement(m.a,{mainSrc:a,onCloseRequest:n,enableZoom:!1,imageLoadErrorMessage:c.a.createElement(d.a,g.loadFail),wrapperClassName:f.a.imageViewer,imagePadding:o,imageTitle:""}),r&&c.a.createElement(u.a,{style:h})))}}]),t}(l.Component);b.defaultProps={imagePadding:100},t.a=Object(d.e)(b)},727:function(e,t,a){e.exports={mbt10_5:"ListHeader_mbt10_5__3iesS",total_header:"ListHeader_total_header__itbu3"}},728:function(e,t,a){e.exports={standardTable:"StandardTable_standardTable__37lgC",tableAlert:"StandardTable_tableAlert__3mUk-"}},729:function(e,t,a){e.exports={imageViewer:"ImageViewer_imageViewer__1C2gj"}},731:function(e,t,a){e.exports={container:"PhotoBox_container__1DsXi",img:"PhotoBox_img__2P6Af"}},736:function(e,t,a){"use strict";var n=a(37),r=a(30),o=a(31),i=a(34),s=a(32),l=a(33),c=a(0),d=a.n(c),u=a(840),m=a(841),p=a(746),f=a.n(p),g=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.labelSpan,a=e.title,r=e.content,o=e.data,i=e.labelPosition,s=e.style,l={top:24,right:24-t,left:""}[i];return d.a.createElement(u.a,{className:f.a.formItem,style:Object(n.a)({},s)},d.a.createElement(m.a,{span:t,className:f.a[i]},o.title||a),d.a.createElement(m.a,{span:l},o.content||r))}}]),t}(d.a.Component);g.defaultProps={data:{},labelSpan:8,title:"",content:"",labelPosition:"left"},t.a=g},737:function(e,t,a){"use strict";a.d(t,"i",function(){return o}),a.d(t,"a",function(){return i}),a.d(t,"l",function(){return s}),a.d(t,"f",function(){return l}),a.d(t,"e",function(){return c}),a.d(t,"h",function(){return d}),a.d(t,"d",function(){return u}),a.d(t,"b",function(){return m}),a.d(t,"c",function(){return p}),a.d(t,"k",function(){return f}),a.d(t,"j",function(){return g}),a.d(t,"g",function(){return h});var n=a(51),r={people:"/api/people",batchAdd:"/api/people/batch",list:"/api/people/list",approval:"/api/people/approval",approvalVisitor:"/api/people/approval/visitors",reset:"/api/people/reset",visitors:"/api/people/visitors"};function o(e){return n.b.get(r.list,{params:e})}function i(e){var t=new FormData;return t=b(t,e),n.b.post(r.people,t)}function s(e){var t=new FormData;return t=b(t,e),n.b.put(r.people,t)}function l(e){return n.b.delete(r.people,{data:{people_id:e}})}function c(e){return n.b.delete(r.list,{data:{people_ids:e}})}function d(e){return n.b.get(r.people,{params:{people_id:e}})}function u(e){return n.b.post(r.batchAdd,e)}function m(e){return n.b.post(r.approval,e)}function p(e){return n.b.post(r.approvalVisitor,e)}function f(e){return n.b.post(r.reset,e)}function g(e){return n.b.get(r.visitors,{params:e})}function h(e){return n.b.delete(r.visitors,{data:{people_ids:e}})}function b(e,t){return Object.keys(t).forEach(function(a){e.append(a,t[a])}),e}},744:function(e,t,a){"use strict";var n=a(37),r=a(30),o=a(31),i=a(34),s=a(32),l=a(33),c=a(238),d=a(0),u=a.n(d),m=a(9),p=a(855),f=a(718),g=a(717),h=a(858),b=a(722),v=p.a.TabPane,E=Object(m.d)({failedToGetData:{id:"common.error.failedToGetData",defaultMessage:"\u83b7\u53d6\u6570\u636e\u5931\u8d25!"},selectedRowRequired:{id:"common.selectedRow.required",defaultMessage:"\u8bf7\u5148\u9009\u62e9\u8981\u64cd\u4f5c\u7684\u6570\u636e!"}}),w=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={selectedRows:[],selectedRowKeys:[],loading:!1,list:[],selectedList:[],total:0,page_number:1,page_size:10,search_form:{},tabParams:{},formKey:Date.now()},a.handleRowSelectChange=function(e,t){a.setState({selectedRowKeys:e,selectedRows:t})},a.onSearch=function(e){e.preventDefault(),a.formRef.props.form.validateFields(function(e,t){e||a.setState({page_number:1,search_form:t},a._loadAsyncData)})},a.handleStandardTableChange=function(e,t,n){var r=a.state,o=r.page_number,i=r.page_size;o=i!==e.pageSize?1:e.current,i=e.pageSize,a.setState({page_number:o,page_size:i},a._loadAsyncData)},a.saveFormRef=function(e){a.formRef=e},a.onTabChange=function(e){var t=e-1,n=a.props.tabParams;if(n.length){var r=n[t];a.setState({tabParams:r,selectedRowKeys:[],selectedRows:[],page_number:1,search_form:[],formKey:Date.now()},a._loadAsyncData)}},a.operateOne=function(){if(a.state.selectedRowKeys.length){var e=function(){this.setState({selectedRowKeys:[],selectedRows:[]},this._loadAsyncData)}.bind(Object(c.a)(Object(c.a)(a)));a.props.operateActions[0](a.state.selectedRowKeys,e)}else f.a.warning(a.props.intl.formatMessage(E.selectedRowRequired))},a.operateTwo=function(){if(a.state.selectedRowKeys.length){var e=function(){this.setState({selectedRowKeys:[],selectedRows:[]},this._loadAsyncData)}.bind(Object(c.a)(Object(c.a)(a)));a.props.operateActions[1](a.state.selectedRowKeys,e)}else f.a.warning(a.props.intl.formatMessage(E.selectedRowRequired))},a}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.tabParams;e.length?this.setState({tabParams:e[0]},this._loadAsyncData):this._loadAsyncData()}},{key:"_loadAsyncData",value:function(){var e=this,t=this.props.requestParams,a=this.props.initParams||{},r=this.props.responseKey,o=this.state,i=o.page_number,s=o.page_size,l=o.search_form,c=void 0===l?{}:l,d=o.tabParams,u=Object(n.a)({page_number:i,page_size:s},a,c,t,d),m=this.props.requiredParamKeyName;!m||u[m]?(this.setState({loading:!0}),this.props.requestMethod(u).then(function(t){var a=t.data;if(1e3===t.code){var n=a.total_number||0;e.setState({list:a[r],total:n})}else f.a.error(t.msg||e.props.intl.formatMessage(E.failedToGetData))}).catch(function(t){f.a.error(e.props.intl.formatMessage(E.failedToGetData))}).finally(function(){e.setState({loading:!1})})):console.log("lack of required param!")}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.title,r=e.columns,o=e.rowKey,i=e.confirmLoading,s=e.formComponent,l=e.totalLabel,c=e.tabTitles,d=void 0===c?["Tab1","Tab2"]:c,m=e.operateLabels,f=void 0===m?[]:m,E=!!s,w=this.state,S=w.loading,y=w.selectedRowKeys,_=w.total,M=w.list,C=w.page_number,O=w.page_size,F=w.formKey,j={current:C,pageSize:O,total:_,showQuickJumper:!0},D={onChange:this.handleRowSelectChange,selectedRowKeys:y,getCheckboxProps:function(e){return{disabled:e.disabled}}};return u.a.createElement(g.a,{visible:t,title:n,onCancel:a,confirmLoading:i,width:920,destroyOnClose:!0,footer:null},u.a.createElement(p.a,{defaultActiveKey:"1",onChange:this.onTabChange,animated:!1},u.a.createElement(v,{tab:d[0],key:"1"},E&&u.a.createElement("div",{style:{height:"60px"}},u.a.createElement(s,{handleSearch:this.onSearch,wrappedComponentRef:this.saveFormRef,key:F})),u.a.createElement(b.a,{title:"".concat(l).concat(this.state.total),buttonText:f[0],buttonType:"default",doAction:this.operateOne})),u.a.createElement(v,{tab:d[1],key:"2"},E&&u.a.createElement("div",{style:{height:"60px"}},u.a.createElement(s,{handleSearch:this.onSearch,wrappedComponentRef:this.saveFormRef,key:F})),u.a.createElement(b.a,{title:"",buttonText:f[1],buttonType:"default",doAction:this.operateTwo}))),u.a.createElement(h.a,{rowKey:o,loading:S,columns:r,dataSource:M,onChange:this.handleStandardTableChange,rowSelection:D,pagination:j,scroll:{y:E?340:400}}))}}]),t}(u.a.Component);t.a=Object(m.e)(w)},745:function(e,t,a){"use strict";a.d(t,"a",function(){return o}),a.d(t,"b",function(){return i}),a.d(t,"c",function(){return s}),a.d(t,"d",function(){return l});var n=a(51),r={binding:"/api/binding",equipment:"/api/binding/equipments",people:"/api/binding/peoples",unbinding:"/api/binding/untying"};function o(e){return n.b.post(r.binding,e)}function i(e){return n.b.get(r.equipment,{params:e})}function s(e){return n.b.get(r.people,{params:e})}function l(e){return n.b.post(r.unbinding,e)}},746:function(e,t,a){e.exports={formItem:"UFormRow_formItem__1weu_",right:"UFormRow_right__2MWFF",left:"UFormRow_left__lE1I2",top:"UFormRow_top__39LUh"}},769:function(e,t,a){e.exports=a(770)},770:function(e,t,a){var n=function(){return this||"object"===typeof self&&self}()||Function("return this")(),r=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,o=r&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=a(335),r)n.regeneratorRuntime=o;else try{delete n.regeneratorRuntime}catch(i){n.regeneratorRuntime=void 0}},814:function(e,t,a){e.exports={img:"Avatar_img__2Lq9L",imgWrapper:"Avatar_imgWrapper__kWP2G",btnDel:"Avatar_btnDel__1-USr"}},815:function(e,t,a){var r;(function(){var a=!1,o=function e(t){return t instanceof e?t:this instanceof e?void(this.EXIFwrapped=t):new e(t)};e.exports&&(t=e.exports=o),t.EXIF=o;var i=o.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},s=o.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},l=o.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},c=o.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},d=o.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function u(e){return!!e.exifdata}function m(e,t){function n(n){var r=p(n);e.exifdata=r||{};var i=function(e){var t=new DataView(e);a&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1))return a&&console.log("Not a valid JPEG"),!1;var n=2,r=e.byteLength,o=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};for(;n<r;){if(o(t,n)){var i=t.getUint8(n+7);i%2!==0&&(i+=1),0===i&&(i=4);var s=n+8+i,l=t.getUint16(n+6+i);return g(e,s,l)}n++}}(n);if(e.iptcdata=i||{},o.isXmpEnabled){var s=function(e){if(!("DOMParser"in self))return;var t=new DataView(e);a&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1))return a&&console.log("Not a valid JPEG"),!1;var n=2,r=e.byteLength,o=new DOMParser;for(;n<r-4;){if("http"==v(t,n,4)){var i=n-1,s=t.getUint16(n-2)-1,l=v(t,i,s),c=l.indexOf("xmpmeta>")+8,d=(l=l.substring(l.indexOf("<x:xmpmeta"),c)).indexOf("x:xmpmeta")+10;l=l.slice(0,d)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+l.slice(d);var u=o.parseFromString(l,"text/xml");return S(u)}n++}}(n);e.xmpdata=s||{}}t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src))n(function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var a=atob(e),n=a.length,r=new ArrayBuffer(n),o=new Uint8Array(r),i=0;i<n;i++)o[i]=a.charCodeAt(i);return r}(e.src));else if(/^blob\:/i.test(e.src)){(i=new FileReader).onload=function(e){n(e.target.result)},function(e,t){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="blob",a.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},a.send()}(e.src,function(e){i.readAsArrayBuffer(e)})}else{var r=new XMLHttpRequest;r.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(r.response),r=null},r.open("GET",e.src,!0),r.responseType="arraybuffer",r.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){var i;(i=new FileReader).onload=function(e){a&&console.log("Got file of length "+e.target.result.byteLength),n(e.target.result)},i.readAsArrayBuffer(e)}}function p(e){var t=new DataView(e);if(a&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return a&&console.log("Not a valid JPEG"),!1;for(var n,r=2,o=e.byteLength;r<o;){if(255!=t.getUint8(r))return a&&console.log("Not a valid marker at offset "+r+", found: "+t.getUint8(r)),!1;if(n=t.getUint8(r+1),a&&console.log(n),225==n)return a&&console.log("Found 0xFFE1 marker"),E(t,r+4,t.getUint16(r+2));r+=2+t.getUint16(r+2)}}var f={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function g(e,t,a){for(var n,r,o,i,s=new DataView(e),l={},c=t;c<t+a;)28===s.getUint8(c)&&2===s.getUint8(c+1)&&(i=s.getUint8(c+2))in f&&((o=s.getInt16(c+3))+5,r=f[i],n=v(s,c+5,o),l.hasOwnProperty(r)?l[r]instanceof Array?l[r].push(n):l[r]=[l[r],n]:l[r]=n),c++;return l}function h(e,t,n,r,o){var i,s,l,c=e.getUint16(n,!o),d={};for(l=0;l<c;l++)i=n+12*l+2,!(s=r[e.getUint16(i,!o)])&&a&&console.log("Unknown tag: "+e.getUint16(i,!o)),d[s]=b(e,i,t,n,o);return d}function b(e,t,a,n,r){var o,i,s,l,c,d,u=e.getUint16(t+2,!r),m=e.getUint32(t+4,!r),p=e.getUint32(t+8,!r)+a;switch(u){case 1:case 7:if(1==m)return e.getUint8(t+8,!r);for(o=m>4?p:t+8,i=[],l=0;l<m;l++)i[l]=e.getUint8(o+l);return i;case 2:return v(e,o=m>4?p:t+8,m-1);case 3:if(1==m)return e.getUint16(t+8,!r);for(o=m>2?p:t+8,i=[],l=0;l<m;l++)i[l]=e.getUint16(o+2*l,!r);return i;case 4:if(1==m)return e.getUint32(t+8,!r);for(i=[],l=0;l<m;l++)i[l]=e.getUint32(p+4*l,!r);return i;case 5:if(1==m)return c=e.getUint32(p,!r),d=e.getUint32(p+4,!r),(s=new Number(c/d)).numerator=c,s.denominator=d,s;for(i=[],l=0;l<m;l++)c=e.getUint32(p+8*l,!r),d=e.getUint32(p+4+8*l,!r),i[l]=new Number(c/d),i[l].numerator=c,i[l].denominator=d;return i;case 9:if(1==m)return e.getInt32(t+8,!r);for(i=[],l=0;l<m;l++)i[l]=e.getInt32(p+4*l,!r);return i;case 10:if(1==m)return e.getInt32(p,!r)/e.getInt32(p+4,!r);for(i=[],l=0;l<m;l++)i[l]=e.getInt32(p+8*l,!r)/e.getInt32(p+4+8*l,!r);return i}}function v(e,t,a){var r="";for(n=t;n<t+a;n++)r+=String.fromCharCode(e.getUint8(n));return r}function E(e,t){if("Exif"!=v(e,t,4))return a&&console.log("Not valid EXIF data! "+v(e,t,4)),!1;var n,r,o,u,m,p=t+6;if(18761==e.getUint16(p))n=!1;else{if(19789!=e.getUint16(p))return a&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=e.getUint16(p+2,!n))return a&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var f=e.getUint32(p+4,!n);if(f<8)return a&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(p+4,!n)),!1;if((r=h(e,p,p+f,s,n)).ExifIFDPointer)for(o in u=h(e,p,p+r.ExifIFDPointer,i,n)){switch(o){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":u[o]=d[o][u[o]];break;case"ExifVersion":case"FlashpixVersion":u[o]=String.fromCharCode(u[o][0],u[o][1],u[o][2],u[o][3]);break;case"ComponentsConfiguration":u[o]=d.Components[u[o][0]]+d.Components[u[o][1]]+d.Components[u[o][2]]+d.Components[u[o][3]]}r[o]=u[o]}if(r.GPSInfoIFDPointer)for(o in m=h(e,p,p+r.GPSInfoIFDPointer,l,n)){switch(o){case"GPSVersionID":m[o]=m[o][0]+"."+m[o][1]+"."+m[o][2]+"."+m[o][3]}r[o]=m[o]}return r.thumbnail=function(e,t,a,n){var r=function(e,t,a){var n=e.getUint16(t,!a);return e.getUint32(t+2+12*n,!a)}(e,t+a,n);if(!r)return{};if(r>e.byteLength)return{};var o=h(e,t,t+r,c,n);if(o.Compression)switch(o.Compression){case 6:if(o.JpegIFOffset&&o.JpegIFByteCount){var i=t+o.JpegIFOffset,s=o.JpegIFByteCount;o.blob=new Blob([new Uint8Array(e.buffer,i,s)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",o.Compression)}else 2==o.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return o}(e,p,f,n),r}function w(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var a=0;a<e.attributes.length;a++){var n=e.attributes.item(a);t["@attributes"][n.nodeName]=n.nodeValue}}}else if(3==e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var r=0;r<e.childNodes.length;r++){var o=e.childNodes.item(r),i=o.nodeName;if(null==t[i])t[i]=w(o);else{if(null==t[i].push){var s=t[i];t[i]=[],t[i].push(s)}t[i].push(w(o))}}return t}function S(e){try{var t={};if(e.children.length>0)for(var a=0;a<e.children.length;a++){var n=e.children.item(a),r=n.attributes;for(var o in r){var i=r[o],s=i.nodeName,l=i.nodeValue;void 0!==s&&(t[s]=l)}var c=n.nodeName;if("undefined"==typeof t[c])t[c]=w(n);else{if("undefined"==typeof t[c].push){var d=t[c];t[c]=[],t[c].push(d)}t[c].push(w(n))}}else t=e.textContent;return t}catch(u){console.log(u.message)}}o.enableXmp=function(){o.isXmpEnabled=!0},o.disableXmp=function(){o.isXmpEnabled=!1},o.getData=function(e,t){return!((self.Image&&e instanceof self.Image||self.HTMLImageElement&&e instanceof self.HTMLImageElement)&&!e.complete)&&(u(e)?t&&t.call(e):m(e,t),!0)},o.getTag=function(e,t){if(u(e))return e.exifdata[t]},o.getIptcTag=function(e,t){if(u(e))return e.iptcdata[t]},o.getAllTags=function(e){if(!u(e))return{};var t,a=e.exifdata,n={};for(t in a)a.hasOwnProperty(t)&&(n[t]=a[t]);return n},o.getAllIptcTags=function(e){if(!u(e))return{};var t,a=e.iptcdata,n={};for(t in a)a.hasOwnProperty(t)&&(n[t]=a[t]);return n},o.pretty=function(e){if(!u(e))return"";var t,a=e.exifdata,n="";for(t in a)a.hasOwnProperty(t)&&("object"==typeof a[t]?a[t]instanceof Number?n+=t+" : "+a[t]+" ["+a[t].numerator+"/"+a[t].denominator+"]\r\n":n+=t+" : ["+a[t].length+" values]\r\n":n+=t+" : "+a[t]+"\r\n");return n},o.readFromBinaryFile=function(e){return p(e)},void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}).call(this)},837:function(e,t,a){e.exports={left:"BatchAddPeople_left__31Zkn",input:"BatchAddPeople_input__8D0ax"}},842:function(e,t,a){var n=a(328),r=a(843),o=Object.prototype.hasOwnProperty,i=r(function(e,t,a){o.call(e,a)?e[a].push(t):n(e,a,[t])});e.exports=i},843:function(e,t,a){var n=a(844),r=a(845),o=a(742),i=a(85);e.exports=function(e,t){return function(a,s){var l=i(a)?n:r,c=t?t():{};return l(a,e,o(s,2),c)}}},844:function(e,t){e.exports=function(e,t,a,n){for(var r=-1,o=null==e?0:e.length;++r<o;){var i=e[r];t(n,i,a(i),e)}return n}},845:function(e,t,a){var n=a(846);e.exports=function(e,t,a,r){return n(e,function(e,n,o){t(r,e,a(e),o)}),r}},846:function(e,t,a){var n=a(847),r=a(848)(n);e.exports=r},847:function(e,t,a){var n=a(751),r=a(333);e.exports=function(e,t){return e&&n(e,t,r)}},848:function(e,t,a){var n=a(327);e.exports=function(e,t){return function(a,r){if(null==a)return a;if(!n(a))return e(a,r);for(var o=a.length,i=t?o:-1,s=Object(a);(t?i--:++i<o)&&!1!==r(s[i],i,s););return a}}},849:function(e,t,a){e.exports={tableList:"PersonnelManage_tableList__TFimv",tableListOperator:"PersonnelManage_tableListOperator__2vOEm",tableListForm:"PersonnelManage_tableListForm__2xl0z",submitButtons:"PersonnelManage_submitButtons__1sfwR",operatorLink:"PersonnelManage_operatorLink__1Gnfm",operatorWrap:"PersonnelManage_operatorWrap__Kvz1y",wordBreak:"PersonnelManage_wordBreak__JSpk-",statusWrap:"PersonnelManage_statusWrap__2mFqz",reject:"PersonnelManage_reject__3KbrP"}},861:function(e,t,a){"use strict";a.r(t);var n=a(769),r=a.n(n),o=a(121);function i(e,t,a,n,r,o,i){try{var s=e[o](i),l=s.value}catch(c){return void a(c)}s.done?t(l):Promise.resolve(l).then(n,r)}var s=a(37),l=a(236),c=a(30),d=a(31),u=a(34),m=a(32),p=a(33),f=a(0),g=a.n(f),h=a(716),b=a(765),v=a(767),E=a(43),w=a(857),S=a(718),y=a(717),_=a(840),M=a(841),C=a(712),O=a(867),F=a(9),j=a(725),D=a(723),P=a(726),R=a(722),L=a(724),I=a(858),x=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.title,r=e.columns,o=void 0===r?[]:r,i=e.rowKey,s=e.dataList,l=void 0===s?[]:s;return g.a.createElement(y.a,{title:n,onCancel:a,width:920,visible:t,footer:null,destroyOnClose:!0},g.a.createElement(I.a,{rowKey:i,columns:o,dataSource:l,onChange:this.handleStandardTableChange,pagination:!1,scroll:{y:450}}))}}]),t}(g.a.Component),k=a(720),A={wordBreak:"break-all",wordWrap:"break-word"},T=Object(F.d)({peopleName:{id:"personnel.name",defaultMessage:"\u59d3\u540d"},photo:{id:"personnel.photo",defaultMessage:"\u7167\u7247"},mobilePhone:{id:"personnel.mobilePhone",defaultMessage:"\u624b\u673a"},visitReason:{id:"personnel.visitReason",defaultMessage:"\u8bbf\u95ee\u4e8b\u7531"},visitTime:{id:"personnel.visitTime",defaultMessage:"\u8bbf\u95ee\u65f6\u95f4"},inviteTime:{id:"personnel.inviteTime",defaultMessage:"\u9080\u8bf7\u65f6\u95f4"},status:{id:"common.status",defaultMessage:"\u72b6\u6001"},accepted:{id:"common.accepted",defaultMessage:"\u5df2\u63a5\u53d7"},confirmPending:{id:"common.confirmPending",defaultMessage:"\u5f85\u786e\u8ba4"},rejected:{id:"common.rejected",defaultMessage:"\u5df2\u62d2\u7edd"},visitorList:{id:"personnel.visitorList",defaultMessage:"\u8bbf\u5ba2\u5217\u8868"}}),N=[{title:g.a.createElement(F.a,T.peopleName),dataIndex:"people_name",width:100,render:function(e,t){return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{style:A},e))}},{title:g.a.createElement(F.a,T.photo),dataIndex:"image",width:100,render:function(e,t){return g.a.createElement(g.a.Fragment,null,t.image&&g.a.createElement(D.a,{photo:t.thumbnail,width:50,height:50}))}},{title:g.a.createElement(F.a,T.mobilePhone),dataIndex:"telephone",width:100},{title:g.a.createElement(F.a,T.visitReason),dataIndex:"reasons_for_access",width:100,render:function(e,t){return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{style:A},e))}},{title:g.a.createElement(F.a,T.visitTime),dataIndex:"visit_time",width:148,render:function(e,t){return g.a.createElement(g.a.Fragment,null,Object(k.j)(t.start_time)," - ",Object(k.j)(t.end_time))}},{title:g.a.createElement(F.a,T.inviteTime),dataIndex:"inviter_time",width:100,render:function(e,t){return g.a.createElement(g.a.Fragment,null,Object(k.j)(e))}},{title:g.a.createElement(F.a,T.status),width:80,dataIndex:"inviter_status",render:function(e,t){return g.a.createElement(g.a.Fragment,null,g.a.createElement(v.a,{status:["success","processing","error"][e-1]}),[g.a.createElement(F.a,T.accepted),g.a.createElement(F.a,T.confirmPending),g.a.createElement(F.a,T.rejected)][e-1])}}],U=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={title:g.a.createElement(F.a,T.visitorList),rowKey:"people_id"},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.dataList,r=this.state,o=r.title,i=r.rowKey;return g.a.createElement(x,{visible:t,onCancel:a,title:o,rowKey:i,columns:N,dataList:n})}}]),t}(f.Component),G=Object(F.e)(U),B=a(859),V=a(245),q=a(11),K=a(814),z=a.n(K),W=a(860),J=a(815),Y=a.n(J);function H(e,t){for(var a=e.split(","),n=a[0].match(/:(.*?);/)[1],r=atob(a[1]),o=r.length,i=new Uint8Array(o);o--;)i[o]=r.charCodeAt(o);var s=null;try{s=new File([i],t,{type:n})}catch(l){(s=new Blob([i],{type:n})).lastModifiedDate=new Date,s.name=t}return s}function X(e){return new Promise(function(t){Y.a.getData(e,function(){var e=Y.a.getTag(this,"Orientation");t(e)})})}var Q={rotateImg:function(e,t,a){if(null!=e){var n=e.height,r=e.width,o=2;null==o&&(o=0),"right"===t?++o>3&&(o=0):"right2"===t?o=2:--o<0&&(o=3);var i=90*o*Math.PI/180,s=a.getContext("2d");switch(o){case 0:a.width=r,a.height=n,s.drawImage(e,0,0);break;case 1:a.width=n,a.height=r,s.rotate(i),s.drawImage(e,0,-n);break;case 2:a.width=r,a.height=n,s.rotate(i),s.drawImage(e,-r,-n);break;case 3:a.width=n,a.height=r,s.rotate(i),s.drawImage(e,-r,0)}}},compress:function(e,t){var a=document.createElement("canvas"),n=a.getContext("2d"),r=document.createElement("canvas"),o=r.getContext("2d"),i=e.width,s=e.height,l=i*s/4e6;l>1?(console.log("\u5927\u4e8e400\u4e07\u50cf\u7d20"),i/=l=Math.sqrt(l),s/=l):l=1,a.width=i,a.height=s,n.fillStyle="#fff",n.fillRect(0,0,a.width,a.height);var c=i*s/1e6;if(c>1){console.log("\u8d85\u8fc7100W\u50cf\u7d20");var d=~~(i/(c=~~(Math.sqrt(c)+1))),u=~~(s/c);r.width=d,r.height=u;for(var m=0;m<c;m++)for(var p=0;p<c;p++)o.drawImage(e,m*d*l,p*u*l,d*l,u*l,0,0,d,u),n.drawImage(r,m*d,p*u,d,u)}else n.drawImage(e,0,0,i,s);if(""!==t&&1!==t)switch(t){case 6:this.rotateImg(e,"left",a);break;case 8:this.rotateImg(e,"right",a);break;case 3:this.rotateImg(e,"right2",a)}var f=a.toDataURL("image/jpeg",.6);return r.width=r.height=a.width=a.height=0,f}};function Z(e){return"image/jpeg"!==e.type&&"image/png"!==e.type?(S.a.error("\u53ea\u80fd\u4e0a\u4f20JPG/PNG\u683c\u5f0f\u7684\u56fe\u7247\u6587\u4ef6!"),!1):!!(e.size/1024/1024<2)||(S.a.error("\u7167\u7247\u4e0d\u80fd\u5927\u4e8e2MB!"),!1)}var $=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).customRequest=function(e){var t=e.file;return X(t).then(function(e){var n=new FileReader,r=new Image,o=e&&1!==e;n.onload=function(n){o?(r.src=n.target.result,r.onload=function(){var n=Q.compress(r,e),o=H(n,t.name);a.setState({photo_url:n,file:o}),a.triggerChange({file:o})}):(a.setState({photo_url:n.target.result,file:t}),a.triggerChange({file:t}))},n.readAsDataURL(t)}),!1},a.triggerChange=function(e){var t=a.props.onChange;t&&t(Object.assign({},a.state,e))},a.removeImage=function(e){e.stopPropagation(),a.setState({photo_url:"",file:""},a.props.onRemove),a.triggerChange({photo_url:"",file:""})};var n=e.value||{};return a.state={photo_url:n.photo_url,file:n.file},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=g.a.createElement("div",null,g.a.createElement(q.a,{type:this.state.loading?"loading":"plus"}),g.a.createElement("div",{className:"ant-upload-text"},"Upload")),t=this.state.photo_url,a=this.props.deletable,n=t||"";return n&&0!==n.indexOf("data:image/")&&0!==t.indexOf("http")&&(n=Object(k.f)({photo_url:n}),n+="?_="+Date.now()),g.a.createElement(W.a,{name:"avatar",accept:"image/jpg, image/jpeg, image/png",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"",beforeUpload:Z,customRequest:this.customRequest},g.a.createElement("span",{className:z.a.imgWrapper},n?g.a.createElement("img",{src:n,alt:"",className:z.a.img}):e,n&&a?g.a.createElement(E.a,{type:"default",shape:"circle",icon:"delete",size:"small",className:z.a.btnDel,onClick:this.removeImage}):null))}}]),t}(g.a.Component);$.defaultProps={onRemove:function(){}};var ee=$,te=a(711),ae=Object(F.d)({selected:{id:"common.selected",defaultMessage:"\u5df2\u9009\u62e9"},selectFiles:{id:"personnel.selectFiles",defaultMessage:"\u9009\u62e9\u6587\u4ef6"},compress:{id:"common.compress",defaultMessage:"\u6b63\u5728\u538b\u7f29..."}}),ne=0,re=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={fileList:[],unSelectedFileList:[],selectedFileList:[],uploading:!1},a.onCustomRequest=function(e){var t=e.file;return X(t).then(function(e){var n=new FileReader,r=new Image,o=e&&1!==e;n.onload=function(n){if(o)r.src=n.target.result,r.onload=function(){var n=Q.compress(r,e),o={photo_url:n,file:H(n,t.name)};a.updateSelected(o)};else{var i={photo_url:n.target.result,file:t};a.updateSelected(i)}},n.readAsDataURL(t)}),!1},a.updateSelected=function(e){var t=[].concat(Object(o.a)(a.state.selectedFileList),[e]),n=a.state.fileList.length;a.setState({selectedFileList:t,uploading:t.length<n}),a.triggerChange({selectedFileList:t,unSelectedFileList:a.state.unSelectedFileList})},a.triggerChange=function(e){var t=a.props.onChange,n=a.state.uploading;t&&t(Object.assign({},e,{uploading:n}))},a.onBeforeUpload=function(e,t){ne||(ne=t.length,a.setState(function(e){e.fileList;return{fileList:[],unSelectedFileList:[],selectedFileList:[],uploading:!1}})),ne-=1;var n="image/jpeg"!==e.type&&"image/png"!==e.type&&"image/jpg"!==e.type;n&&(console.log("\u7167\u7247\u53ea\u652f\u6301JPEG/JPG/PNG\u683c\u5f0f!"),a.setState(function(t){var a=t.unSelectedFileList;return{unSelectedFileList:[].concat(Object(o.a)(a||[]),[e])}},function(){a.triggerChange({selectedFileList:a.state.selectedFileList,unSelectedFileList:a.state.unSelectedFileList})}));var r=e.size/1024/1024<2;r||(console.log("\u7167\u7247\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc72M"),a.setState(function(t){var a=t.unSelectedFileList;return{unSelectedFileList:[].concat(Object(o.a)(a||[]),[e])}},function(){a.triggerChange({selectedFileList:a.state.selectedFileList,unSelectedFileList:a.state.unSelectedFileList})}));var i=!n&&r;return i&&a.setState(function(t){var a=t.fileList;return{fileList:[].concat(Object(o.a)(a||[]),[e])}}),i},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.showSelected,n=e.selectText,r=this.state.selectedFileList.length<this.state.fileList.length;return g.a.createElement("div",null,g.a.createElement(W.a,{disabled:r,name:"upload",action:"",accept:"image/jpg, image/jpeg, image/png",multiple:!0,showUploadList:!1,customRequest:this.onCustomRequest,beforeUpload:this.onBeforeUpload},t||g.a.createElement(E.a,{style:{paddingLeft:"20px",paddingRight:"20px"}},g.a.createElement(q.a,{type:"upload"}),n||g.a.createElement(F.a,ae.selectFiles))),a&&g.a.createElement(g.a.Fragment,null,"\xa0(",g.a.createElement(F.a,ae.selected),"\xa0",this.state.fileList.length+this.state.unSelectedFileList.length,")"),r&&g.a.createElement(g.a.Fragment,null,"\xa0",g.a.createElement(te.a,{size:"small"}),g.a.createElement(F.a,ae.compress)),r)}}]),t}(f.Component);re.defaultProps={showSelected:!0};var oe=Object(F.e)(re),ie=(a(837),Object(F.d)({photo:{id:"personnel.photo",defaultMessage:"\u7167\u7247"},photoFormat:{id:"personnel.photo.format",defaultMessage:'\u7167\u7247\u53ea\u652f\u6301JPG/JPEG/PNG\u683c\u5f0f\uff0c\u4e14\u6bcf\u5f20\u5927\u5c0f\u4e0d\u8d85\u8fc72M\u3002\u5b8c\u6574\u547d\u540d\u683c\u5f0f\u4e3a\u201c\u59d3\u540d+\u624b\u673a\u53f7&\u8bc1\u4ef6\u53f7\u201d\uff0c\u53ef\u6839\u636e\u9700\u8981\u652f\u6301\u201c\u59d3\u540d\u201d/"\u59d3\u540d+\u624b\u673a\u53f7"/"\u59d3\u540d&\u8bc1\u4ef6\u53f7"\u7684\u547d\u540d\u683c\u5f0f\u3002'},photoRequired:{id:"personnel.photo.required",defaultMessage:"\u8bf7\u9009\u62e9\u7167\u7247!"},selectFiles:{id:"personnel.selectFiles",defaultMessage:"\u9009\u62e9\u6587\u4ef6"}})),se=h.a.Item,le=(b.a.Option,B.a.RangePicker,{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:18}}}),ce=h.a.create()(function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={uploading:!1},a.onOk=function(){if(a.state.uploading)return!1;a.props.onCreate()},a.onImageChange=function(e){a.setState({uploading:e.uploading})},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=(e.onCreate,e.form),r=e.formData,o=e.confirmLoading,i=n.getFieldDecorator,s=r||{};return g.a.createElement(y.a,{visible:t,title:s.title,onCancel:a,onOk:this.onOk,confirmLoading:o,width:500,destroyOnClose:!0},g.a.createElement(h.a,null,g.a.createElement(se,Object.assign({},le,{label:g.a.createElement("span",null,g.a.createElement(V.a,{title:g.a.createElement(F.a,ie.photoFormat)},g.a.createElement(q.a,{type:"question-circle-o"}))," ",g.a.createElement(F.a,ie.photo))}),i("imageList",{rules:[{required:!0,message:g.a.createElement(F.a,ie.photoRequired)}]})(g.a.createElement(oe,{onChange:this.onImageChange})))))}}]),t}(g.a.Component)),de=a(721),ue=h.a.Item,me=(B.a.RangePicker,Object(F.d)({personnelName:{id:"personnel.name",defaultMessage:"\u59d3\u540d"},photo:{id:"personnel.photo",defaultMessage:"\u7167\u7247"},mobilePhone:{id:"personnel.mobilePhone",defaultMessage:"\u624b\u673a"},mobilePhoneFormat:{id:"personnel.mobilePhone.format",defaultMessage:"\u8054\u7cfb\u7535\u8bdd\u4e3a6-20\u4f4d\u6570\u5b57!"},personnelNameRequired:{id:"personnel.name.required",defaultMessage:"\u8bf7\u8f93\u5165\u59d3\u540d!"},photoRequired:{id:"personnel.photo.required",defaultMessage:"\u8bf7\u9009\u62e9\u7167\u7247!"},mark:{id:"common.mark",defaultMessage:"\u5907\u6ce8"},idcardNumber:{id:"personnel.idcardNumber",defaultMessage:"\u8bc1\u4ef6\u53f7"}})),pe=h.a.create()(function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.onCreate,r=e.form,o=e.formData,i=e.confirmLoading,s=r.getFieldDecorator,l=this.props.intl.locale,c={labelCol:{xs:{span:24},sm:{span:"en"===l?7:4}},wrapperCol:{xs:{span:24},sm:{span:"en"===l?17:18}}},d=o||{};return g.a.createElement(y.a,{visible:t,title:d.title,onCancel:a,onOk:n,width:420,destroyOnClose:!0,confirmLoading:i},g.a.createElement(h.a,null,s("people_id",{initialValue:d.people_id})(g.a.createElement(C.a,{type:"hidden"})),g.a.createElement(ue,Object.assign({label:g.a.createElement(F.a,me.personnelName)},c),s("people_name",{rules:[{required:!0,message:g.a.createElement(F.a,me.personnelNameRequired)}],initialValue:d.people_name})(g.a.createElement(C.a,{maxLength:de.a.userName}))),g.a.createElement(ue,Object.assign({},c,{label:g.a.createElement(F.a,me.photo)}),s("image",{rules:[{required:!0,message:g.a.createElement(F.a,me.photoRequired)}],initialValue:d.image&&{photo_url:d.image}})(g.a.createElement(ee,null)))))}}]),t}(g.a.Component)),fe=Object(F.e)(pe),ge=a(744),he=a(19),be=a(745),ve=h.a.Item,Ee=(b.a.Option,Object(F.d)({sourceAccount:{id:"account.sourceAccount",defaultMessage:"\u6240\u5c5e\u8d26\u6237"},all:{id:"common.all",defaultMessage:"\u5168\u90e8"},search:{id:"common.search",defaultMessage:"\u67e5\u8be2"},deviceName:{id:"device.deviceName",defaultMessage:"\u8bbe\u5907\u540d\u79f0"}})),we=h.a.create()(function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={},a.onAccountChange=function(e){a.props.form.setFieldsValue({account_id:e[e.length-1]})},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=(e.formData,t.getFieldDecorator),n=Object(he.a)("userInfo",!0);return g.a.createElement(h.a,{onSubmit:this.props.handleSearch,layout:"inline",style:{display:"flex",padding:"5px",alignItems:"center"}},3!==(Object(he.a)("userInfo",!0)||{}).role&&g.a.createElement(g.a.Fragment,null,a("account_id",{initialValue:n.account_id})(g.a.createElement(C.a,{type:"hidden"})),g.a.createElement(ve,{label:g.a.createElement(F.a,Ee.sourceAccount)},a("account_ids",{initialValue:[n.account_id]})(g.a.createElement(L.a,{onChange:this.onAccountChange})))),g.a.createElement(ve,{label:g.a.createElement(F.a,Ee.deviceName)},a("equipment_name")(g.a.createElement(C.a,{maxLength:de.a.deviceName}))),g.a.createElement(E.a,{icon:"search",htmlType:"submit",type:"primary"},g.a.createElement(F.a,Ee.search)))}}]),t}(g.a.Component)),Se=Object(F.e)(we),ye={wordBreak:"break-all",wordWrap:"break-word"},_e=Object(F.d)({deviceName:{id:"device.deviceName",defaultMessage:"\u8bbe\u5907\u540d\u79f0"},deviceID:{id:"device.deviceID",defaultMessage:"\u8bbe\u5907ID"},connectStatus:{id:"device.connectStatus",defaultMessage:"\u8fde\u63a5\u72b6\u6001"},sourceAccount:{id:"account.sourceAccount",defaultMessage:"\u6240\u5c5e\u8d26\u6237"},relateSuccess:{id:"common.relate.success",defaultMessage:"\u5173\u8054\u6210\u529f!"},relateError:{id:"common.relate.error",defaultMessage:"\u5173\u8054\u5931\u8d25!"},cancelRelateSuccess:{id:"common.cancelRelate.success",defaultMessage:"\u53d6\u6d88\u5173\u8054\u6210\u529f!"},cancelRelateError:{id:"common.cancelRelate.error",defaultMessage:"\u53d6\u6d88\u5173\u8054\u5931\u8d25!"},relateDevice:{id:"device.relateDevice",defaultMessage:"\u5173\u8054\u8bbe\u5907"},related:{id:"common.related",defaultMessage:"\u5df2\u5173\u8054"},unrelated:{id:"common.unrelated",defaultMessage:"\u672a\u5173\u8054"},relate:{id:"common.relate",defaultMessage:"\u5173\u8054"},cancelRelate:{id:"common.cancelRelate",defaultMessage:"\u53d6\u6d88\u5173\u8054"},relatedDeviceNumber:{id:"device.relatedDeviceNumber",defaultMessage:"\u5173\u8054\u8bbe\u5907\u6570"},online:{id:"common.online",defaultMessage:"\u5728\u7ebf"},offline:{id:"common.offline",defaultMessage:"\u79bb\u7ebf"}}),Me=[{title:g.a.createElement(F.a,_e.deviceName),dataIndex:"equipment_name",width:100,render:function(e,t){return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{style:ye},e))}},{title:g.a.createElement(F.a,_e.deviceID),dataIndex:"equipment_id",width:100},{title:g.a.createElement(F.a,_e.connectStatus),dataIndex:"status",width:100,render:function(e,t){return g.a.createElement(g.a.Fragment,null,g.a.createElement(v.a,{status:["success","error"][e-1]}),[g.a.createElement(F.a,_e.online),g.a.createElement(F.a,_e.offline)][e-1])}},{title:g.a.createElement(F.a,_e.sourceAccount),dataIndex:"account_name",width:100,render:function(e,t){return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{style:ye},e))}}],Ce=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).binding=function(e,t){Object(be.a)({people_ids:[a.props.peopleId],equipment_ids:e}).then(function(e){1e3===e.code?(S.a.success(a.props.intl.formatMessage(_e.relateSuccess)),t&&t()):S.a.error(e.msg||a.props.intl.formatMessage(_e.relateError))}).catch(function(e){console.log(e)})},a.unbinding=function(e,t){Object(be.d)({people_ids:[a.props.peopleId],equipment_ids:e}).then(function(e){1e3===e.code?(S.a.success(a.props.intl.formatMessage(_e.cancelRelateSuccess)),t&&t()):S.a.error(e.msg||a.props.intl.formatMessage(_e.cancelRelateError))}).catch(function(e){console.log(e)})},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.uuid,r=e.peopleId,o=Object(he.a)("userInfo",!0),i=(o.role,o.account_id),s={account_id:i,account_ids:[i]};return g.a.createElement(ge.a,{title:g.a.createElement(F.a,_e.relateDevice),tabTitles:[g.a.createElement(F.a,_e.related),g.a.createElement(F.a,_e.unrelated)],tabParams:[{binding:1},{binding:0}],visible:t,onCancel:a,columns:Me,key:n,responseKey:"equipments",rowKey:"equipment_id",totalLabel:"".concat(this.props.intl.formatMessage(_e.relatedDeviceNumber),"\uff1a"),operateLabels:[g.a.createElement(F.a,_e.cancelRelate),g.a.createElement(F.a,_e.relate)],operateActions:[this.unbinding,this.binding],requestMethod:be.b,requestParams:{people_id:r},initParams:s,requiredParamKeyName:"people_id",formComponent:Se})}}]),t}(f.Component),Oe=Object(F.e)(Ce),Fe=a(736),je=Object(F.d)({personnelName:{id:"personnel.name",defaultMessage:"\u59d3\u540d"},mobilePhone:{id:"personnel.mobilePhone",defaultMessage:"\u624b\u673a"},photo:{id:"personnel.photo",defaultMessage:"\u7167\u7247"},mark:{id:"common.mark",defaultMessage:"\u5907\u6ce8"},idcardNumber:{id:"personnel.idcardNumber",defaultMessage:"\u8bc1\u4ef6\u53f7"}}),De=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.formData||{},r=[{title:"".concat(this.props.intl.formatMessage(je.personnelName),"\uff1a"),content:n.people_name},{title:"".concat(this.props.intl.formatMessage(je.photo),"\uff1a"),content:g.a.createElement(D.a,{photo:n.thumbnail,width:130,height:130})}];return g.a.createElement(y.a,{visible:t,title:n.title,onCancel:a,width:400,footer:null,destroyOnClose:!0},g.a.createElement("div",null,r.map(function(e){return g.a.createElement(Fe.a,{labelSpan:6,title:e.title,content:e.content,key:e.title,labelPosition:"right"})})))}}]),t}(g.a.Component),Pe=Object(F.e)(De),Re=a(737),Le=a(51),Ie=a(842),xe=a.n(Ie),ke=a(849),Ae=a.n(ke),Te=h.a.Item,Ne=(b.a.Option,Object(F.d)({personnelName:{id:"personnel.name",defaultMessage:"\u59d3\u540d"},photo:{id:"personnel.photo",defaultMessage:"\u7167\u7247"},mobilePhone:{id:"personnel.mobilePhone",defaultMessage:"\u624b\u673a"},identifier:{id:"common.identifier",defaultMessage:"\u7f16\u53f7"},sourceAccount:{id:"account.sourceAccount",defaultMessage:"\u6240\u5c5e\u8d26\u6237"},status:{id:"common.status",defaultMessage:"\u72b6\u6001"},registered:{id:"common.registered",defaultMessage:"\u5df2\u6ce8\u518c"},rejected:{id:"common.rejected",defaultMessage:"\u5df2\u62d2\u7edd"},approvalPending:{id:"common.approvalPending",defaultMessage:"\u5f85\u5ba1\u6279"},approve:{id:"common.approve",defaultMessage:"\u540c\u610f"},reject:{id:"common.reject",defaultMessage:"\u62d2\u7edd"},visitorNumber:{id:"personnel.visitorNumber",defaultMessage:"\u8bbf\u5ba2\u6570"},operate:{id:"common.operate",defaultMessage:"\u64cd\u4f5c"},operateSuccess:{id:"common.operate.success",defaultMessage:"\u64cd\u4f5c\u6210\u529f!"},operateError:{id:"common.operate.error",defaultMessage:"\u64cd\u4f5c\u5931\u8d25!"},relateDevice:{id:"device.relateDevice",defaultMessage:"\u5173\u8054\u8bbe\u5907"},resetPassword:{id:"account.resetPassword",defaultMessage:"\u5bc6\u7801\u91cd\u7f6e"},resetConfirm:{id:"common.reset.confirm",defaultMessage:"\u786e\u5b9a\u91cd\u7f6e\u5417?"},resetSuccess:{id:"common.reset.success",defaultMessage:"\u91cd\u7f6e\u6210\u529f!"},resetError:{id:"common.reset.error",defaultMessage:"\u91cd\u7f6e\u5931\u8d25\u4e86!"},edit:{id:"common.edit",defaultMessage:"\u7f16\u8f91"},search:{id:"common.search",defaultMessage:"\u67e5\u8be2"},reset:{id:"common.reset",defaultMessage:"\u91cd\u7f6e"},all:{id:"common.all",defaultMessage:"\u5168\u90e8"},delete:{id:"common.delete",defaultMessage:"\u5220\u9664"},deleteSuccess:{id:"common.delete.success",defaultMessage:"\u5220\u9664\u6210\u529f!"},deleteError:{id:"common.delete.error",defaultMessage:"\u5220\u9664\u5931\u8d25\u4e86!"},failedToGetData:{id:"common.error.failedToGetData",defaultMessage:"\u83b7\u53d6\u6570\u636e\u5931\u8d25!"},batchAdd:{id:"common.batchAdd",defaultMessage:"\u6279\u91cf\u6dfb\u52a0"},batchAddSuccess:{id:"common.batchAdd.success",defaultMessage:"\u6279\u91cf\u6dfb\u52a0\u6210\u529f!"},batchAddError:{id:"common.batchAdd.error",defaultMessage:"\u6279\u91cf\u6dfb\u52a0\u5931\u8d25!"},batchDelete:{id:"common.batchDelete",defaultMessage:"\u6279\u91cf\u5220\u9664"},deleteConfirm:{id:"common.delete.confirm",defaultMessage:"\u786e\u5b9a\u5220\u9664\u5417?"},batchDeleteConfirm:{id:"common.batchDelete.confirm",defaultMessage:"\u786e\u5b9a\u6279\u91cf\u5220\u9664\u5417?"},batchDeleteSuccess:{id:"common.batchDelete.success",defaultMessage:"\u6279\u91cf\u5220\u9664\u6210\u529f!"},batchDeleteError:{id:"common.batchDelete.error",defaultMessage:"\u6279\u91cf\u5220\u9664\u5931\u8d25!"},addPeople:{id:"personnel.addPeople",defaultMessage:"\u6dfb\u52a0\u4eba\u5458"},updatePeople:{id:"personnel.updatePeople",defaultMessage:"\u66f4\u65b0\u4eba\u5458"},photoFormat:{id:"personnel.photo.format",defaultMessage:"\u7167\u7247\u540d\u5373\u4e3a\u59d3\u540d\uff0c\u82e5\u8981\u52a0\u4e0a\u201c\u624b\u673a\u201d\uff0c\u7167\u7247\u540d\u683c\u5f0f\u4e3a\u201c\u59d3\u540d+\u624b\u673a\u53f7\u201d\uff0c\u7167\u7247\u53ea\u652f\u6301JPG/JPEG/PNG\u683c\u5f0f\uff0c\u4e14\u6bcf\u5f20\u5927\u5c0f\u4e0d\u8d85\u8fc72M!"},partFailError:{id:"personnel.addError.partFail",defaultMessage:"\u6dfb\u52a0\u4eba\u5458\u90e8\u5206\u5931\u8d25\uff0c\u539f\u56e0\u5982\u4e0b!"},failError:{id:"personnel.addError.fail",defaultMessage:"\u6dfb\u52a0\u4eba\u5458\u5931\u8d25\uff0c\u539f\u56e0\u5982\u4e0b!"},photoFormatError:{id:"personnel.addError.photoFormat",defaultMessage:"\u7167\u7247\u683c\u5f0f\u4e0d\u7b26\u6216\u5927\u5c0f\u8d85\u8fc7\u9650\u5236"},add:{id:"common.add",defaultMessage:"\u6dfb\u52a0"},update:{id:"common.update",defaultMessage:"\u66f4\u65b0"},success:{id:"common.success",defaultMessage:"\u6210\u529f!"},failed:{id:"common.failed",defaultMessage:"\u5931\u8d25\u4e86!"},peopleList:{id:"personnel.peopleList",defaultMessage:"\u4eba\u5458\u5217\u8868"},confirmDelete:{id:"common.confirmDelete",defaultMessage:"\u786e\u8ba4\u5220\u9664"},cancel:{id:"common.cancel",defaultMessage:"\u53d6\u6d88"},idcardNumber:{id:"personnel.idcardNumber",defaultMessage:"\u8bc1\u4ef6\u53f7"},peopleDetail:{id:"personnel.details",defaultMessage:"\u4eba\u5458\u8be6\u60c5"}})),Ue=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,d=new Array(n),p=0;p<n;p++)d[p]=arguments[p];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(d)))).columns=[{title:g.a.createElement(F.a,Ne.personnelName),dataIndex:"people_name",render:function(e,t){return g.a.createElement(g.a.Fragment,null,g.a.createElement("a",{className:Ae.a.wordBreak,href:"javascript:;",onClick:function(){return a.showViewModal(t)}},e))}},{title:g.a.createElement(F.a,Ne.photo),dataIndex:"image",render:function(e,t){return g.a.createElement(g.a.Fragment,null,t.image&&g.a.createElement(D.a,{photo:t.thumbnail,width:50,height:50,onClick:function(){a.showImage(e)}}))}},{title:g.a.createElement(F.a,Ne.identifier),dataIndex:"people_id"},{title:g.a.createElement(F.a,Ne.sourceAccount),dataIndex:"account_name",render:function(e,t){return g.a.createElement(g.a.Fragment,null,g.a.createElement("span",{className:Ae.a.wordBreak},e))}},{title:g.a.createElement(F.a,Ne.status),dataIndex:"approval",render:function(e,t){return g.a.createElement(g.a.Fragment,null,g.a.createElement(v.a,{status:["success","processing","error"][e-1]}),[g.a.createElement(F.a,Ne.registered),g.a.createElement(F.a,Ne.approvalPending),g.a.createElement(F.a,Ne.rejected)][e-1],2===e&&g.a.createElement("div",{className:Ae.a.statusWrap},g.a.createElement(E.a,{size:"small",onClick:function(){return a.onApprove(t.people_id,!0)}},g.a.createElement(F.a,Ne.approve)),g.a.createElement(E.a,{size:"small",type:"danger",className:Ae.a.reject,onClick:function(){return a.onApprove(t.people_id,!1)}},g.a.createElement(F.a,Ne.reject))))}},{title:g.a.createElement(F.a,Ne.visitorNumber),dataIndex:"visitor_number",render:function(e,t){return g.a.createElement(g.a.Fragment,null,g.a.createElement("a",{href:"javascript:;",onClick:function(){return a.onOpenVisitorList(t)}},e))}},{title:g.a.createElement(F.a,Ne.operate),dataIndex:"operate",render:function(e,t){return g.a.createElement("div",{className:Ae.a.operatorWrap},1===t.approval&&g.a.createElement(g.a.Fragment,null,g.a.createElement("a",{href:"javascript:;",className:Ae.a.operatorLink,onClick:function(){return a.showSelectModal(t.people_id)}},g.a.createElement(F.a,Ne.relateDevice)),g.a.createElement(w.a,{title:g.a.createElement(F.a,Ne.resetConfirm),onConfirm:function(){return a.resetPwd(t.people_id)},className:Ae.a.operatorLink},g.a.createElement("a",{href:"javascript:;"},g.a.createElement(F.a,Ne.resetPassword))),g.a.createElement("a",Object(l.a)({href:"javascript:;",onClick:function(){return a.showEditModal(t)},className:Ae.a.operatorLink},"className",Ae.a.operatorLink),g.a.createElement(F.a,Ne.edit)),g.a.createElement(w.a,{title:g.a.createElement(F.a,Ne.deleteConfirm),onConfirm:function(){return a.onDelete(t.people_id)},className:Ae.a.operatorLink},g.a.createElement("a",{href:"javascript:;"},g.a.createElement(F.a,Ne.delete)))),3===t.approval&&g.a.createElement(g.a.Fragment,null,g.a.createElement(w.a,{title:g.a.createElement(F.a,Ne.deleteConfirm),onConfirm:function(){return a.onDelete(t.people_id)},className:Ae.a.operatorLink},g.a.createElement("a",{href:"javascript:;"},g.a.createElement(F.a,Ne.delete)))))}}],a.queryStrings=a.props.location.query||{},a.accountId=a.queryStrings.account_id||"",a.parentId=a.queryStrings.parent_id||"",a.state={selectedRows:[],loading:!1,confirmLoading:!1,locked:!1,visible:!1,showView:!1,showBatch:!1,peoples:[],errPeoples:[],batchAddSuccess:0,isShowImage:!1,imageViewUrl:"",search_form:{},uuid:Date.now(),batchKey:Date.now()+Math.random(),total:0,page_number:1,page_size:k.c,viewListDataSource:[],isVisitorListVisible:!1,isEquipmentListVisible:!1,selectedPeopleId:"",batchDeleteMode:!1},a.onAccountChange=function(e){a.props.form.setFieldsValue({account_id:e[e.length-1]})},a.getInitAccountIds=function(){var e=Object(he.a)("userInfo",!0),t=e.role,n=[e.account_id];return 1===t&&a.accountId&&(a.parentId&&n.push(Number(a.parentId)),n.push(a.accountId)),n},a.toggleBatchDelete=function(e){e||a.setState({selectedRows:[]}),a.setState({batchDeleteMode:!a.state.batchDeleteMode})},a.resetPwd=function(e){Object(Re.k)({people_id:e}).then(function(e){1e3===e.code?S.a.success(a.props.intl.formatMessage(Ne.resetSuccess)):S.a.error(e.msg||a.props.intl.formatMessage(Ne.resetError))}).catch(function(e){S.a.error(a.props.intl.formatMessage(Ne.resetError)),console.log(e)})},a.onBatchShow=function(){var e={title:g.a.createElement(F.a,Ne.batchAdd)};a.setState({showBatch:!0,batchFormData:e,batchKey:Date.now()})},a.onDelete=function(e){Object(Re.f)(e).then(function(t){1e3===t.code?(S.a.success(a.props.intl.formatMessage(Ne.deleteSuccess)),a.setState({selectedRows:a.state.selectedRows.filter(function(t){return t.people_id!==e})}),a._loadAsyncData()):S.a.error(t.msg||a.props.intl.formatMessage(Ne.deleteError))}).catch(function(e){S.a.error(a.props.intl.formatMessage(Ne.deleteError))})},a.onApprove=function(e,t){Object(Re.b)({people_id:e,approval:t}).then(function(e){1e3===e.code?(S.a.success(a.props.intl.formatMessage(Ne.operateSuccess)),a._loadAsyncData()):S.a.error(a.props.intl.formatMessage(Ne.operateError))}).catch(function(e){S.a.error(a.props.intl.formatMessage(Ne.operateError)),console.log(e)})},a.onDeleteAll=function(){if(a.state.selectedRows){var e=a.state.selectedRows.reduce(function(e,t){return e.push(t.people_id),e},[]);Object(Re.e)(e).then(function(e){1e3===e.code?(S.a.success(a.props.intl.formatMessage(Ne.batchDeleteSuccess)),a.setState({selectedRows:[]}),a._loadAsyncData()):S.a.error(e.msg||a.props.intl.formatMessage(Ne.batchDeleteError))}).catch(function(e){S.a.error(a.props.intl.formatMessage(Ne.batchDeleteError))})}},a.handleStandardTableChange=function(e,t,n){var r=a.state,o=r.page_number,i=r.page_size;o=i!==e.pageSize?1:e.current,i=e.pageSize,a.setState({page_number:o,page_size:i},a._loadAsyncData)},a.handleFormReset=function(){a.props.form.resetFields(),a.setState({page_number:1,search_form:{}},a._loadAsyncData)},a.handleSearch=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||a.setState({page_number:1,search_form:t},a._loadAsyncData)})},a.showAddForm=function(){var e={title:g.a.createElement(F.a,Ne.addPeople)};a.setState({visible:!0,formData:e})},a.showEditModal=function(e){a.state.locked||(a.setState({locked:!0}),a.getInfo(e.people_id).then(function(e){var t=e,n=Object(s.a)({title:g.a.createElement(F.a,Ne.updatePeople)},t);a.setState({visible:!0,formData:n,locked:!1})}).catch(function(e){S.a.error(e),a.setState({locked:!1})}))},a.saveFormRef=function(e,t){a[t]=e},a.saveBatchFormRef=function(e){a.batchFormRef=e},a.handleModal=function(e,t){a.setState(Object(l.a)({},e,t))},a.onOpenVisitorList=function(e){var t=[];Object(Re.j)({page_number:1,page_size:9999,inviter_id:e.people_id}).then(function(e){var n=e.data;1e3===e.code?(t=n.peoples||[],a.setState({viewListDataSource:t}),a.handleModal("isVisitorListVisible",!0)):(a.setState({viewListDataSource:[]}),S.a.error(e.msg||a.props.intl.formatMessage(Ne.failedToGetData)))}).catch(function(e){console.log(e),S.a.error(a.props.intl.formatMessage(Ne.failedToGetData))})},a.showImage=function(e){a.setState({isShowImage:!0,imageViewUrl:e})},a.closeImage=function(){a.setState({isShowImage:!1,imageViewUrl:""})},a.doBatchAdd=function(){var e,t=(e=r.a.mark(function e(t,n){var i,s,l,c,d,u,m;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=t.length,a.setState({errPeoples:[],batchAddSuccess:0}),s=0;case 3:if(!(s<i)){e.next=12;break}return l=new FormData,c=t[s],l.append("[]image",c.file),e.next=9,Object(Re.d)(l).then(function(e){1e3===e.code?a.setState({batchAddSuccess:a.state.batchAddSuccess+1}):10301===e.code?a.setState({errPeoples:[].concat(Object(o.a)(a.state.errPeoples),Object(o.a)(e.data.err_people))}):console.log("error")}).catch(function(e){console.log("catch",e)});case 9:s++,e.next=3;break;case 12:a.state.errPeoples.length||n.length?(d=xe()(a.state.errPeoples,"Errmsg"),u=Object.keys(d),m=0!==a.state.batchAddSuccess?a.props.intl.formatMessage(Ne.partFailError):a.props.intl.formatMessage(Ne.failError),y.a.info({title:m,content:g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{style:{maxHeight:"280px",overflowY:"auto"}},n.length?g.a.createElement("div",null,g.a.createElement(F.a,Ne.photoFormatError),":"):null,n.map(function(e){return g.a.createElement("div",{key:e.name},e.name)}),u.map(function(e){return g.a.createElement("div",{key:e},g.a.createElement("div",null,e,"\uff1a"),g.a.createElement(g.a.Fragment,null,d[e].map(function(e){return g.a.createElement("div",{key:e.ImageFile},e.ImageFile)})))}))),onOk:function(){}}),a.setState({showBatch:!1,confirmLoading:!1},a.handleFormReset)):a.state.batchAddSuccess===i?(S.a.success(a.props.intl.formatMessage(Ne.batchAddSuccess)),a.setState({showBatch:!1,confirmLoading:!1},a.handleFormReset)):(S.a.error(a.props.intl.formatMessage(Ne.batchAddError)),a.setState({confirmLoading:!1}));case 13:case"end":return e.stop()}},e)}),function(){var t=this,a=arguments;return new Promise(function(n,r){var o=e.apply(t,a);function s(e){i(o,n,r,s,l,"next",e)}function l(e){i(o,n,r,s,l,"throw",e)}s(void 0)})});return function(e,a){return t.apply(this,arguments)}}(),a.handleBatchCreate=function(){a.batchFormRef.props.form.validateFields(function(e,t){if(!e){var n=t.imageList,r=n.selectedFileList,o=n.unSelectedFileList;r.length?(a.setState({confirmLoading:!0}),a.doBatchAdd(r,o)):S.a.warning(a.props.intl.formatMessage(Ne.photoFormatError))}})},a.showViewModal=function(e){a.state.locked||(a.setState({locked:!0}),a.getInfo(e.people_id).then(function(e){var t=e,n=Object(s.a)({title:g.a.createElement(F.a,Ne.peopleDetail)},t);a.setState({showView:!0,formData:n,locked:!1})}).catch(function(e){S.a.error(e),a.setState({locked:!1})}))},a.handleCreate=function(){var e=a.editFormRef.props.form;e.validateFields(function(t,n){if(!t){var r=(n.image||{}).file,o=n.people_id,i=n.people_name,s=n.telephone,l=n.idcard_number,c=n.mark,d=Object(k.d)({image:r,people_id:o,people_name:i,telephone:s,idcard_number:l,mark:c}),u=d.people_id?Re.l:Re.a,m=d.people_id?a.props.intl.formatMessage(Ne.update):a.props.intl.formatMessage(Ne.add);a.setState({confirmLoading:!0}),u(d).then(function(t){1e3===t.code?(S.a.success("".concat(m).concat(a.props.intl.formatMessage(Ne.success))),d.people_id?a._loadAsyncData():a.handleFormReset(),a.setState({visible:!1}),e.resetFields()):S.a.error(t.msg||"".concat(m).concat(a.props.intl.formatMessage(Ne.failed))),a.setState({confirmLoading:!1})}).catch(function(e){S.a.error("".concat(m).concat(a.props.intl.formatMessage(Ne.failed))),a.setState({confirmLoading:!1})})}})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.showSelectModal=function(e){a.setState({selectedPeopleId:e,uuid:Date.now()}),a.handleModal("isSelectVisible",!0)},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.getInitAccountIds(),a=this.props.form,n=t.slice(-1)[0];this.setState({search_form:{account_ids:t,account_id:n}}),a.setFieldsValue({account_ids:t,account_id:n},function(){e._loadAsyncData()})}},{key:"componentWillUnmount",value:function(){Object(Le.a)()}},{key:"_loadAsyncData",value:function(){var e=this;this.setState({loading:!0});var t=this.state,a=t.page_number,n=t.page_size,r=t.search_form,o=void 0===r?{}:r,i=[];Object(Re.i)(Object(s.a)({page_number:a,page_size:n},o)).then(function(t){var a=t.data;if(1e3===t.code){i=a.peoples||[];var n=a.total_number||0;e.setState({peoples:i,total:n,selectedRows:[]})}else e.setState({peoples:[],selectedRows:[]}),S.a.error(t.msg||e.props.intl.formatMessage(Ne.failedToGetData))}).catch(function(e){console.log(e)}).finally(function(){e.setState({loading:!1})})}},{key:"getInfo",value:function(e){var t=this;return new Promise(function(a,n){Object(Re.h)(e).then(function(e){1e3===e.code?a(e.data):n(e.msg||t.props.intl.formatMessage(Ne.failedToGetData))}).catch(function(e){n(t.props.intl.formatMessage(Ne.failedToGetData))})})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return g.a.createElement(h.a,{onSubmit:this.handleSearch,layout:"inline"},g.a.createElement(_.a,{gutter:{md:8,lg:24,xl:48}},3!==(Object(he.a)("userInfo",!0)||{}).role&&g.a.createElement(M.a,{md:8,sm:24},e("account_id")(g.a.createElement(C.a,{type:"hidden"})),g.a.createElement(Te,{label:g.a.createElement(F.a,Ne.sourceAccount)},e("account_ids")(g.a.createElement(L.a,{onChange:this.onAccountChange})))),g.a.createElement(M.a,{md:8,sm:24},g.a.createElement(Te,{label:g.a.createElement(F.a,Ne.personnelName)},e("people_name")(g.a.createElement(C.a,{maxLength:de.a.userName})))),g.a.createElement(M.a,{md:8,sm:24},g.a.createElement("span",{className:Ae.a.submitButtons},g.a.createElement(E.a,{type:"primary",htmlType:"submit"},g.a.createElement(F.a,Ne.search)),g.a.createElement(E.a,{style:{marginLeft:8},onClick:this.handleFormReset},g.a.createElement(F.a,Ne.reset))))))}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.selectedRows,r=t.peoples,o=t.total,i=t.visible,s=t.formData,l=(t.batchFormData,t.page_number),c=t.page_size,d=t.confirmLoading,u={current:l,pageSize:c,total:o};return g.a.createElement(g.a.Fragment,null,g.a.createElement(O.a,{bordered:!1},g.a.createElement("div",{className:Ae.a.tableList},g.a.createElement("div",{className:Ae.a.tableListForm},this.renderSimpleForm()),g.a.createElement(R.a,{title:g.a.createElement(F.a,Ne.peopleList),customButton:g.a.createElement(g.a.Fragment,null,this.state.batchDeleteMode?g.a.createElement(g.a.Fragment,null,g.a.createElement(E.a,{onClick:function(){return e.toggleBatchDelete(!1)},style:{marginRight:5}},g.a.createElement(F.a,Ne.cancel)),n.length<=0?g.a.createElement(E.a,{disabled:!0},g.a.createElement(F.a,Ne.confirmDelete)):g.a.createElement(w.a,{title:g.a.createElement(F.a,Ne.batchDeleteConfirm),onConfirm:function(){return e.onDeleteAll()}},g.a.createElement(E.a,null,g.a.createElement(F.a,Ne.confirmDelete)))):g.a.createElement(g.a.Fragment,null,g.a.createElement(E.a,{type:"default",onClick:this.showAddForm,style:{marginRight:5}},g.a.createElement(F.a,Ne.addPeople)),g.a.createElement(E.a,{type:"default",onClick:this.onBatchShow,style:{marginRight:5}},g.a.createElement(F.a,Ne.batchAdd)),g.a.createElement(E.a,{onClick:function(){return e.toggleBatchDelete(!0)}},g.a.createElement(F.a,Ne.batchDelete)))),style:{marginBottom:5}}),g.a.createElement(j.a,{rowKey:"people_id",selectedRows:n,selectable:this.state.batchDeleteMode,showAlert:!1,pagination:u,loading:a,dataList:r,columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),g.a.createElement(fe,{wrappedComponentRef:function(t){return e.saveFormRef(t,"editFormRef")},visible:i,onCancel:function(){return e.handleModal("visible",!1)},onCreate:this.handleCreate,formData:s,confirmLoading:d}),g.a.createElement(ce,{wrappedComponentRef:this.saveBatchFormRef,visible:this.state.showBatch,onCancel:function(){return e.handleModal("showBatch",!1)},onCreate:this.handleBatchCreate,formData:this.state.batchFormData,key:this.state.batchKey,confirmLoading:d}),g.a.createElement(P.a,{imageUrl:this.state.imageViewUrl,isOpen:this.state.isShowImage,onClose:this.closeImage}),g.a.createElement(G,{visible:this.state.isVisitorListVisible,onCancel:function(){return e.handleModal("isVisitorListVisible",!1)},dataList:this.state.viewListDataSource}),g.a.createElement(Oe,{visible:this.state.isSelectVisible,onCancel:function(){return e.handleModal("isSelectVisible",!1)},uuid:this.state.uuid,peopleId:this.state.selectedPeopleId}),g.a.createElement(Pe,{visible:this.state.showView,onCancel:function(){return e.handleModal("showView",!1)},formData:this.state.formData}))}}]),t}(g.a.Component);t.default=Object(F.e)(h.a.create()(Ue))}}]);
//# sourceMappingURL=7.96cae532.chunk.js.map